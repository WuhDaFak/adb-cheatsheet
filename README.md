<p align="center">
  <img width="120px" src="https://i.imgur.com/o2WZgcl.png" />
  <h2 align="center"># Android™ Debug Bridge (adb)</h2>
  <h3 align="center">Your journey to mastering <i>Android™ Shell</i> begins here</h3>
</p>

This wiki is up to date and we also cover new commands on `Android 13` - Release date for Android v13: `15 August 2022`. 

## Android 12 FRP Bypass for <small>All Samsung devices</small>

<li><a href="https://github.com/wuseman/Android_12_FRPBypass">Samsung Android 12 FRPBypass - All models</a></li>

## Android™ FRP Bypass by <small>wuseman</small>

* [wuseman - Samsung Galaxy A10 (FRP Bypss)](https://github.com/wuseman/Samsung_Galaxy.A10_FRP.Bypass)
* [wuseman - Samsung Galaxy A10 (Root)](https://github.com/wuseman/Samsung_Galaxy.A10_Rooting)
* [wuseman - Samsung Galaxy A5](https://github.com/wuseman/Samsung_Galaxy.A5_FRP.Bypass)
* [wuseman - Samsung Galaxy S8](https://github.com/wuseman/Samsung_Galaxy.S8-FRP.Bypass)
* [wuseman - Samsung Galaxy S10](https://github.com/wuseman/Samsung_Galaxy.s10_FRP.Bypass)
* [wuseman - Samsung Galaxy Xcover 4](https://github.com/wuseman/Samsung.Xcover.4-FrpBypass)
* [wuseman - Motorola Moto E4 Plus](https://github.com/wuseman/Motorola_Moto_E4.Plus.v7.1-FRP_BYPASS)
* [wuseman - Huawei MediaTab T5](https://github.com/wuseman/Huawei_Mediatab-T5-FRP-Bypass_V8.0) 
* [wuseman - LG G6](https://github.com/wuseman/LG_G6-FRP-Bypass)

## Android™ <small>Source Code</small>

* [Android™ Source Code](https://cs.android.com/android/platform/superproject/)

## Android™ Issue <small>Tracker</small>

* [Android™ Issue Tracker](https://code.google.com/p/android/issues/entry)

## Android™ <small>SDK Tools</small>

* [Download SDK Platform-Tools for Linux](https://dl.google.com/android/repository/platform-tools_r32.0.0-linux.zip)
* [Download SDK Platform-Tools for MacOSX](https://dl.google.com/android/repository/platform-tools_r32.0.0-darwin.zip)     
* [Download SDK Platform-Tools for Windows](https://dl.google.com/android/repository/platform-tools-latest-windows.zip)

## Android™ Tools <small></small>

* [Androguard - Disassemble DEX/ODEX bytecodes](https://github.com/androguard/androguard/)
* [Frija - Samsung firmware downloader](https://github.com/SlackingVeteran/frija/releases/download/v1.4.4/Frija-v1.4.4.zip) 

## Open Android™ <small>Default Applications</small>

* [Click to Open - ADB Settings](intent://com.sec.android.app.modemui.activities.USB.settings/#Intent;scheme=android-app;end)
* [Click to Open - Calculator](intent://com.sec.android.app.popupcalculator/#Intent;scheme=android-app;end)
* [Click to Open - Home Launcher](intent://com.sec.android.app.launcher/#Intent;scheme=android-app;end)
* [Click to Open - Screen Smartlock](intent://com.google.android.gms/#Intent;scheme=promote_smartlock_scheme;end)
* [Click to Open - Settings](intent://com.android.settings/#Intent;scheme=android-app;end)

* [Click to Open - USB Settings](intent://com.sec.android.app.servicemodeapp/#Intent;scheme=promote_USBSettings_scheme;end)

## Open Android™ <small>Applications</small>


* [Click to Open - Alliance Shield X (Galaxy Store)](https://galaxy.store/alliance)
* [Click to Open - Alliance Shield X (Application)](intent://com.rrivenllc.shieldx/#Intent;scheme=android-app;end)

## Open Android™ <small>Samsung Applications</small>


* [Click to Open - Samsung Apps](intent://com.sec.android.app.samsungapps/#Intent;scheme=android-app;end)
* [Click to Open - Samsung Biometrics Fingerprint ID](intent://com.android.settings/com.samsung.android.settings.biometrics.fingerprint.FingerprintEntry/#Intent;scheme=android-app;end)
* [Click to Open - Samsung Dialer Call](intent://com.samsung.android.dialer/#Intent;scheme=android-app;end)
* [Click to Open - Samsung My Files](intent://com.sec.android.app.myfiles/#Intent;scheme=android-app;end)
* [Click to Open - Samsung Knox Secure Folder](intent://com.samsung.knox.securefolder/#Intent;scheme=android-app;end)
* [Click to Open - Samsung Galaxy Store ](intent://com.sec.android.app.samsungapps/#Intent;scheme=android-app;end)
* [Click to Open - Samsung Secure Folder](intent://com.samsung.knox.securefolder/#Intent;scheme=android-app;end)
* [Click to Open - Samsung Smart Switch](intent://com.sec.android.easyMover/#Intent;scheme=android-app;end)
* [Click to Open - Samsung Smart Switch](intent://com.samsung.knox.securefolder/#Intent;scheme=android-app;end)
* [Click to Open - Samsung Touch ID](intent://com.android.settings/com.samsung.android.settings.biometrics.fingerprint.FingerprintEntry/#Intent;scheme=android-app;end)

## Open Android™ <small>Google Applications</small>

* [Click to Open - Google Assistant](intent://com.google.android.apps.googleassistant/#Intent;scheme=android-app;end)
* [Click to Open - Google Chrome Browser](intent://com.android.chrome/#Intent;scheme=android-app;end)
* [Click to Open - Google Gmail](intent://com.google.android.gm/#Intent;scheme=android-app;end)
* [Click to Open - Google Login Account](intent://com.google.android.gsf.login.LoginActivity/#Intent;scheme=android-app;end)
* [Click to Open - Google Maps](intent://com.google.android.apps.maps/#Intent;scheme=android-app;end)
* [Click To Open - Google Quicksearchbox](intent://com.google.android.googlequicksearchbox/#Intent;scheme=android-app;end)
* [Click to Open - Youtube](intent://com.google.android.youtube/#Intent;scheme=android-app;end)

## Open Android™ <small>Motorola Applications</small>

* [Click to Open - Motorola Default Launcher](intent://com.motorola.launcher3/#Intent;scheme=android-app;end)

## Open Android™ <small>Xiamaoi Applications</small>

* [Click to Open Mi Manager](intent://com.mi.android.globalFileexplorer/#Intent;scheme=android-app;end)

## Open Android™ <small>Secret Codes</small>

* [Click to Open UUISD Code - Show IMEI - *#06*](tel:%20*#0*#/#Intent;scheme=android-app;end")
* [Click to Open UUISD Code - Show Secret Diagnostic Mode - *#0#*](tel:%20*#0*#/#Intent;scheme=android-app;end")

## Download Android™ <small>Google Account Manager</small>

* [Google Account Manager Android 4.0.3](https://www.nr1.nu/archive/android/google_account_manager/google_account_manager.v4.0.3.apk)
* [Google Account Manager Android 4.4.4](https://www.nr1.nu/archive/android/google_account_manager/google_account_manager.v4.4.4.apk)
* [Google Account Manager Android 5.0.1](https://www.nr1.nu/archive/android/google_account_manager/google_account_manager.v5.0.1.apk)
* [Google Account Manager Android 6.0](https://www.nr1.nu/archive/android/google_account_manager/google_account_manager.v6.0.apk)
* [Google Account Manager Android 7.0](https://www.nr1.nu/archive/android/google_account_manager/google_account_manager.v7.0.apk)
* [Google Account Manager Android 7.1.2](https://www.nr1.nu/archive/android/google_account_manager/google_account_manager.v7.1.2.apk)
* [Google Account Manager Android 7.1.25](https://www.nr1.nu/archive/android/google_account_manager/google_account_manager.v7.1.25.apk)
* [Google Account Manager Android 8.0](https://www.nr1.nu/archive/android/google_account_manager/google_account_manager.v8.0.apk)
* [Google Account Manager Android 8.1](https://www.nr1.nu/archive/android/google_account_manager/google_account_manager.v8.1.apk)
* [Google Account Manager Android 9](https://www.nr1.nu/archive/android/google_account_manager/google_account_manager.v9.apk)
* [Google Account Manager Android 10](https://www.nr1.nu/archive/android/google_account_manager/google_account_manager.v10.apk)   
* [Google Quick Search Box](https://addrom.com/intent://com.google.android.googlequicksearchbox/#Intent)

## Download Android™ apks for <small>FRP Bypass</small>

<li><a href="https://www.nr1.nu/archive/android/pangu/pangu.frp.unlocker_android.5.6.7.8.9.10.11.12.apk">Pangu FRP Bypass</a></li>


## Secret Codes™ <small>Samsung Latest Models</small>

| Secret Code          | Description      | ADB Activity                                                                               |
|----------------------|------------------|--------------------------------------------------------------------------------------------|
| `*#06#`              |  IMEI number     | com.sec.android.app.servicemodeapp/com.sec.android.app.modemui.activities.ShowIMEI         |
| `*#0228#`            |  Battery status  | com.sec.android.app.factorykeystring/com.sec.android.app.status.BatteryStatus              |
| `*#0*#`              |  HW Module Test  | com.sec.android.app.hwmoduletest/com.sec.android.app.hwmoduletest.HwModuleTest             |
| `*#2222#`            |  Service Mode    | com.sec.android.RilServiceModeApp/com.sec.android.RilServiceModeApp.ServiceModeApp         |
| `*#2222#`            |  WiFi Info       | com.sec.android.app.servicemodeapp/com.sec.android.app.servicemodeapp.WifiInfoActivity     |
| `*#2663`             |  Touch FIrmware  | com.sec.android.app.factorykeystring/com.sec.android.app.status.touch_firmware             |
| `*#1234`             |  FIrmware info   | com.sec.android.app.factorykeystring/com.sec.android.app.version.SimpleVersion             |

## Secret USSD short codes for <small>AT&T</small>

| Code                      | Description
|---------------------------|----------------------------------------------------------------------------------------------------------------|
| `*61`                     | Block individual unwanted inbound calls                                                                         |
| `*80`                     | Turn off call blocking                                                                                          |
| `*78#`                    | Do Not Disturb mode (blocks all incoming calls). Callers will hear a busy signal                                |
| `*79#`                    | Turn off Do Not Disturb mode                                                                                    |
| `*67+Phone number+#`      | Blocks outgoing Caller ID on a per-call basis. Information still visible to toll-free numbers and 911           |
| `*370#`                   | Disable call waiting                                                                                            |
| `*371#`                   | Reactivate call waiting                                                                                         |

## Android™ Default <small>paths</small>

| Paths                                         | Description                               |
|-----------------------------------------------|-------------------------------------------|
| `/data/data/<package>/databases`              | Default storage for `.db` files           | 
| `/data/data/<package>/shared_prefs/`          | Default storage for `shared` preferences  |
| `/data/app`                                   | Default storage for `third-ṕarty` apps    |
| `/system/app`                                 | Default storage for `system` apks         |
| `/mmt/asec`                                   | Default storage for `encrypted` files     |
| `/mmt/emmc`                                   | Default storage for `internal` storage    | 
| `/mmt/sdcard`                                 | Default storage for `externa`l mmc/sdcard |


## ADB Shell / Fastboot <small>install</small>

### Arch Linux (pacman)

```bash
pacman -S android-tools
```

### Debian Linux (apt)

```bash
apt install adb fastboot -y    
```

### Gentoo Linux (portage)
```bash
emerge --ask dev-util/android-sdk-update-manager dev-util/android-tools
```

### Fedora Linux (dnf)

```bash
dnf install adb
```

### GNU/Linux (source)
```bash
1) Download the Android SDK Platform Tools ZIP file for Linux.
2) Extract the ZIP to an easily-accessible location (like the Desktop for example).
3) Open a Terminal window.
4) Enter the following command: cd /path/to/extracted/folder/
5) This will change the directory to where you extracted the ADB files.
6) So for example: cd /Users/Doug/Desktop/platform-tools/
7. Connect your device to your Linux machine with your USB cable. 
   Change the connection mode to “file transfer (MTP)” mode. 
   This is not always necessary for every device, but it’s recommended so you don’t run into any issues.
8) Once the Terminal is in the same folder your ADB tools are in, you can execute the following command to launch the ADB daemon: ./adb devices
9) Back on your smartphone or tablet device, you’ll see a prompt asking you to allow USB debugging. Go ahead and grant it.
```

### Windows (source)

```bash
1) Download: https://dl.google.com/android/repository/platform-tools-latest-windows.zip
2) Extract the contents of this ZIP file into an easily accessible folder (such as C:\platform-tools)
3) Open Windows explorer and browse to where you extracted the contents of this ZIP file
4) Then open up a Command Prompt from the same directory as this ADB binary. This can be done by holding 
     Shift and Right-clicking within the folder then click the “Open command window here” option. 
5) Connect your smartphone or tablet to your computer with a USB cable. 
      Change the USB mode to “file transfer (MTP)” mode. Some OEMs may or may not require this, 
      but it’s best to just leave it in this mode for general compatibility.
6) In the Command Prompt window, enter the following command to launch the ADB daemon: adb devices
7) On your phone’s screen, you should see a prompt to allow or deny USB Debugging access. Naturally, 
      you will want to grant USB Debugging access when prompted (and tap the always allow check box if you never want to see that prompt again).
8) Finally, re-enter the command from step #6. If everything was successful,
      you should now see your device’s serial number in the command prompt (or the PowerShell window).
```

***

### Awesome Aliases For <small>ADB</small>

Copy and paste for add below aliases in ~/.bashrc

```bash
cat <<! >> ~/.bashrc

function startintent() {
  adb devices \
    |tail -n +2 \
    |cut -sf 1 \
    |xargs -I X adb -s X shell am start $(1)

function apkinstall() {
  adb devices \
    |tail -n +2 \
    |cut -sf 1 \
    |xargs -I X \
      adb -s X install -r $(1)
}

function rmapp() {
  adb devices \
    |tail -n +2 \
    |cut -sf 1 \
    |xargs -I X adb -s X uninstall $(1)
}

function clearapp() {
  adb devices \
    |tail -n +2 \
    |cut -sf 1 \
    |xargs -I X adb -s X shell cmd package clear $(1)
}
```


### Setup and connect to device via <small>WiFi</small>

This requires that the usb cable is connected until you connect, 
once connected via usb copy and paste:

<video src="https://user-images.githubusercontent.com/26827453/203466099-a579dd3f-f4f8-4269-bf07-a5753ae8feff.mp4"></video>

```bash
#!/bin/bash
# Author: wuseman

port="5555"

interface=$(adb shell ip addr | awk '/state UP/ {print $2}' | sed 's/.$//'; )
ip=$(adb shell ifconfig ${interface} \
    |egrep  -o '(\<([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\>\.){3}\<([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\>' 2> /dev/null \
    |head -n 1)

adb tcpip ${port};sleep 0.5
adb connect $ip:${port}; sleep 1.0
adb devices; adb shell
```

### Grab all activities that is available via <small>am start</small>

<details><summary>expand me for video preview</summary>
<p>
<video src="https://user-images.githubusercontent.com/26827453/201458541-f47c04f0-cb65-4512-88df-9ea2227d7ccd.mp4"></video>
</p>
</details>
  
```bash
#!/bin/bash
# Author: wuseman

for package in $(cmd package list packages|cut -d: -f2); do 
    cmd package dump $package \
        |grep -i "activ" \
        |grep -Eo "^[[:space:]]+[0-9a-f]+[[:space:]]+.*/[^[:space:]]+" \
        |grep -oE "[^[:space:]]+$"; 
done > /tmp/full_activity_package_list.txt
```

### Enter termux enviroment via <small>ADB</small>

Source: [rewida17 - termux](https://gist.githubusercontent.com/rewida17/f8564bee5a196a8f51b98cd2e53813e4/raw/6c1fbf160438e351c79238e976ee8e3c4bf4742d/termux)

```bash
#!/system/xbin/bash
# Author: rewida17
# Modded by: wuseman

if [[ $(id -u) -ne "0" ]]; then 
  echo "root is requried"; 
  exit
else
  export PREFIX='/data/data/com.termux/files/usr'
  export HOME='/data/data/com.termux/files/home'
  export LD_LIBRARY_PATH='/data/data/com.termux/files/usr/lib'
  export PATH="/data/data/com.termux/files/usr/bin:/data/data/com.termux/files/usr/bin/applets:$PATH"
  export LANG='en_US.UTF-8'
  export SHELL='/data/data/com.termux/files/usr/bin/bash'
  export BIN='/data/data/com.termux/files/usr/bin' 
  export TERM=vt220
  export AR="arm-linux-androideabi-ar"
  export CPP="arm-linux-androideabi-cpp"
  export GCC="arm-linux-androideabi-gcc"
  export LD="arm-linux-androideabi-ld"
  export NM="arm-linux-androideabi-nm"
  export OBJDUMP="arm-linux-androideabi-objdump"
  export RANLIB="arm-linux-androideabi-ranlib"
  export READELF="arm-linux-androideabi-readelf"
  export STRIP="arm-linux-androideabi-strip"
  export TERMUX="/data/data/com.termux/"

  resize
  cd "$HOME"
  exec "$SHELL" -l
```

## Print esim via <small>uiautomator</small>

* Read screen via uiautomor and print IMEI for all active esim/sim cards on device

```bash
#!/bin/bash
# Author: wuseman

### Launch IMEI (same result if you type in caller app: *#06#) 
#### and dump screen to /tmp/read_screen.txt via uiautomator and parse esim IMEI:

adb shell input keyevent KEYCODE_CALL;
sleep 1;
input text '*#06#'; 
uiautomator dump --compressed /dev/stdout\
    |tr ' ' '\n'\
    |awk -F'"' '{print $2}'|grep "^[0-9]\{15\}$" \
    |nl -w 1 -s':'\
    |sed 's/^/IMEI/g'    
```

## Print Device <small>screen state</small>

```bash
screenState="$(adb shell dumpsys input_method \
   |grep -i "mSystemReady=true mInteractive=" \
   |awk -F= '{print $3}')"

if [[ $screenState = "true" ]]; then 
    echo "Screen is on"; 
else 
    echo "Screen is off"; 
fi
```

# How reboot works on Android 

## Reboot Commands

### Reboot to Bootloader 

```bash
adb reboot bootloader
```

### Reboot to Fastboot 
```bash
adb reboot fastboot
```

### Reboot to Recovery

```bash
adb reboot recovery
```

### Reboot to System
```bash
adb reboot
```

### What is hot and warm reboot

 In order to answer your question we need to define what a hot (or warm) reboot is on an Android device. Terms cold (or hard) boot and warm (or soft) boot are more associated with PCs, particularly Windows. For mobile phones or embedded devices it's difficult to draw a clear line between cold and warm boot. In case of cold reboot, usually power is cut to CPUs, and also possibly to RAM and even to whole motherboard. Soft reboot only kills and starts the processes, while retaining power to hardware components. Power management is part of open-source ACPI/UEFI/BIOS standard on PCs while on phones PMIC firmware is usually used with SoCs.

### How reboot really works on android

On (re)boot SoC firmware loads bootloaders in memory which then load executable binaries and start processes (actual OS). From my answer to What is the fastest way to shutdown un-rooted Android phone?: Android is based on Linux kernel - the very first executable of operating system which is run during boot process. Kernel initializes necessary hardware and prepares a basic environment before executing init - the very first userspace process we can see. It's init which then starts and takes care of all services and processes.

 A civilized way to do reboot or shutdown is to let all processes terminate themselves saving any pending work, un-mount filesystems and then ask the kernel to reverse the boot process. init can handle this on modern OSes or you can do manually through /proc/sysrq-trigger interface. Or we can ask kernel to perform a quick reboot killing everything. However this may cause data loss, particularly due to filesystem corruption.

A brutal way is the long press of power button (handled by PMIC) which is a cold reboot (or shutdown) in true sense because the power to CPUs (and RAM) is suddenly cut without waiting for userspace processes and kernel to terminate gracefully.

### Does android really perform a cold reboot?

On Android phones (and on other systems as well) a normal reboot is not completely cold as power is not cut at least to RAM because it holds an area where kernel panic logs are stored which can be accessed on next boot (refer to ramoops used for last_kmsg or pstore). See some more hints in bootloader boot reason specification. Similarly some other memory regions allocated to SoC components and signed firmware which are isolated from application processor (AP on which main OS runs) may also not be erased. They include Baseband Processor (modem), Digital Signal Processor (DSP), WiFi / BT module etc.

However a normal reboot isn't a warm reboot either. During reboot kernel kills itself and hands over the control to bootloader(s) which may boot device in different possible modes (fastboot/bootloader, recovery or normal boot). The low level details are vendor and hardware specific; if a device performs a complete power-on reset (PoR) or if the hardware is not reset at all. Which components are powered down during different types of reboots depends on the interaction between kernel, bootloader, SoC, PMIC, watchdog hardware etc.

### How to do a hot reboot

Linux kernel also supports another form of warm reboot: kexec. Kernel can terminate userspace processes and itself, executing a new kernel which then may start new userspace environment without doing hardware reset, POST and re-initialization by BIOS. See kexec-reboot for instance. However the new kernel has to consider that the hardware devices aren't reset, so they won't be in sane state. This approach is theoretically possible on Android too i.e. kernel re-executes itself with proper commandline and then starts init. But it requires some device-specific changes to kernel and ROM. See an example use case of kexecboot.

Stock Android doesn't provide soft reboot functionality but some custom ROMs implement this feature by triggering restart method of activity service. This kills zygote and its associated processes including wificond, netd, mediaserver, cameraserver, audioserver and some vendor daemons. However init itself and other core daemons like ueventd, vold, installd, surfaceflinger, logd, servicemanager, healthd and a long list of vendor daemons aren't restarted.

ActivityManagerService.restart requires android.permission.SET_ACTIVITY_WATCHER and calls ActivityManagerService.shutdown which requires android.permission.SHUTDOWN. Both permissions have Protection Level signature, so third party apps can't have them. adb shell also doesn't have the SHUTDOWN permission, so root is required.


### On Android 9 code for restart method is `179`

```bash
adb shell service call activity 179
```

### Also its possible to ask init to restart zygote and dependent services 

SELinux won't let the property be set, so root is required

```bash
adb shell setprop ctl.restart zygote
```

## acpi

### Show help for acpi

```
adb shell acpi --help
```

### Print Battery Percentage
```bash
adb shell acpi 2> /dev/null
```

### Show Cooling Device State

```bash
adb shell 'su -c acpi -c'    
```

### Show Temperatures

```bash
adb shell acpi -t 2> /dev/null
```

### Just print everything from acpi
```bash
adb shell acpi -V
```


## adb

# Environment variables

| Variable                        | Description 
|---------------------------------|:--------------------------------------------------------------|
| `$ADB_TRACE`                    | List of debug info to log                                     |
| `$ADB_VENDOR_KEYS`              | Colon Separated list of keys                                  |
| `$ANDROID_SERIA`L               | Serial number to connect to                                   |
| `$ANDROID_LOG_TAGS`             | Tags to be used by logcat                                     |
| `$ADB_LOCAL_TRANSPORT_MAX_PORT` | Max emulator scan port                                        |
| `$ADB_MDNS_AUTO_CONNECT`        | Comma Separated list of mdns services to allow auto-connect   |

# Debug Commands

### Create `bugreport.zip` in /sdcard path

```bash
adb bugreport /sdcard
```

### List pids of processes hosting a JDWP transport
```bash
adb jdwp    
```

### Show device log (logcat --help for more)
```bash
adb logcat                   
```
### Sideload the given full OTA package

```bash
adb sideload OTAPACKAGE     
```

### Restart adbd with root permissions

```bash
adb root                     
```

### Restart adbd without root permissions

```bash
adb unroot                   
```

### Restart adbd listening on USB

```bash
adb usb                      
```

### Restart adbd listening on TCP on PORT

```bash
adb tcpip <port>               
```

### Restart userspace

```bash
adb reboot userspace
```

# Internal debugging

### Start adb server

```bash
adb start-server
```

### Kill adb server

```bash
adb kill-server
```

### Stop adb server

```bash
adb stop-server
```

### Kick connection from host side to force reconnect

```bash
adb reconnect                
```

### Kick connection from device side to force reconnect

```bash
adb reconnect device         
```

### Reset offline/unauthorized devices to force reconnect

```bash
adb reconnect offline        
```

# USB Commands

### Attach a detached USB device

```bash
adb attach                   
```

### Detach from a USB device to allow use by other 

```bash
adb detach                   
```

# Shell Commands


### Enter device `shell`

```bash
adb shell
```

### Ahoose escape character, or `"none"`; default '`~`'

```bash
adb shell -e 
```

### Don't read from `stdin`

```bash
adb shell -n
```

### Disable pty allocation

```bash
adb shell -T
```

### Allocate a `pty` if on a `tty`

```bash
adb shell -t
```
### Force allocate a `pty` if on a `tty`

```bash
adb shell -tt
```

### Disable remote exit codes and `stdout/stderr` separation

```bash
adb shell -x
```

### Run `emulator` console command

```bash
adb shell emu COMMAND             
```

### Enter device shell when there is more then one device connected

* USB connected

```bash
adb -s <serial> shell
```
* Network connected

```bash
adb -s <ip:port> shell
```

### Print connection status

```bash
adb devices -l
```

### Print adb help
```bash
adb help                     
```

### Print current adb version installed
```bash
adb version
```

# Network Commands

### Connect to a device via TCP/IP 

* Defualt port: 5555

```bash
adb connect <ip:port>    
```
### Disconnect all connected devices

```bash
adb disconnect all
```

### Disconnect from given TCP/IP device

```bash
adb disconnect <ip:port>
```

### Pair with a device for secure TCP/IP communication

```bash
adb pair <ip:port> <pairing code>
```

### List all forward socket connections

```bash
adb forward --list           
```

### Forward socket connection 

* Port 0 = Any port

```bash
adb forward tcp:<port>
```

```bash
adb forward localabstract:<socket name>
```

```bash
adb forward localreserved:<socket name>
```

```bash
adb forward localfilesystem:<socket name>
```

```bash
adb forward jdwp:<process pid> (remote only)
```

```bash
adb forward vsock:<CID>:<port> (remote only)
```

```bash
adb forward acceptfd:<fd> (listen only)
```

### Remove specific forward socket connection

```bash
adb forward --remove 'local/remote'   
```

### Remove all forward socket connections

```bash
adb forward --remove-all    
```

### Run PPP over USB
```bash
adb ppp TTY <parameter>
```

### List all reverse socket connections

```bash
adb reverse --list           
```

### Reverse socket connection using

```bash
adb reverse tcp:<port>
```

```bash
adb reverse localabstract:<socket name>
```

```bash
adb reverse localreserved:<socket name>
```

```bash
adb reverse localfilesystem:<socket name>
```

### Remove specific reverse socket connection

```bash
adb reverse --remove 'LOCAL/REMOTE'
```

### Remove all reverse socket connections
```bash
adb reverse --remove-all     
```

### Check if mdns discovery is available

```bash
adb mdns check               
```

### List all discovered services

```bash
adb mdns services            
```

# Security Commands

### Disable dm-verity checking on userdebug builds

```bash
adb disable-verity           
```

### Re-Enable dm-verity checking on userdebug builds

```bash
adb enable-verity            
```

# Generate adb public/private key
```bash
adb  keygen <filename>
```
     
# Scripting Commands

### Wait for device to be in a given state

* STATE: `device`, `recovery`, `rescue`, `sideload`, `bootloader`, or `disconnect`
* TRANSPORT: `usb`, `local`, or any `[default=any]`

```bash
adb wait-for[-TRANSPORT]-STATE...
```

### Print device state (offline|bootloader|device) 

```bash
adb get-state                
```
### Print device serial number

```bash
adb get-serialno             print <serial-number>
```
### Print dev path

```bash
adb get-devpath 
```

### Remount partitions read-write

```bash
adb remount -R   
```

## am 

## adb shell am start

### Print all activitys that we can launch for prefered application

```bash
#!/bin/bash
# Author: wuseman

dumpsys package com.android.settings \
    |grep -Eo "^[[:space:]]+[0-9a-f]+[[:space:]]+com.android.settings/[^[:space:]]+Activity" \
    |grep -io com.* \
    |sed "s/^/am start -n '/g" \
    |sed "s/$/'/g"
```

### Print all activitys that we can launch for all installed application on device

```bash
#!/bin/bash
# Author: wuseman

for packages in $(cmd package list packages|awk -F':' '{print $2}'|sort); do
    dumpsys package ${packages} \
    |grep -Eo "^[[:space:]]+[0-9a-f]+[[:space:]]+${packages}/[^[:space:]]+Activity" \
    |grep -io com.* \
    |sed "s/^/am start -n '/g" \
    |sed "s/$/'/g" \
    |awk '!seen[$0]++'
done
```

### Dump all activitys for all packages enable on device

Print all activitys that we can launch for all installed application on device and store it to a file, much faster then print it to stdout

```bash
for packages in $(cmd package list packages|awk -F':' '{print $2}'|sort); do
    dumpsys package ${packages} \
    |grep -Eo "^[[:space:]]+[0-9a-f]+[[:space:]]+${packages}/[^[:space:]]+Activity" \
    |grep -io com.* \
    |sed "s/^/am start -n '/g" \
    |sed "s/$/'/g" \
    |awk '!seen[$0]++'
done > /sdcard/wuseman/all_activitys_for_am.txt
```



### Launch application and enter the activity section of the applications settings

You have to use single quotes OR escape the dollar sign for this to work

* Correct way to launch the activity

```bash
am start -n 'com.android.settings/.Settings$ApnSettingsActivity' 
Starting: Intent { cmp=com.android.settings/.Settings$ApnSettingsActivity }
```

* This works but the above example is better

```bash
am start -n com.android.settings/.Settings\$ApnSettingsActivity
Starting: Intent { cmp=com.android.settings/.Settings$ApnSettingsActivity }
```

* And this is WRONG! This will launch settings without go to the activity

```bash
am start -n com.android.settings/.Settings$ApnSettingsActivity
Warning: Activity not started, intent has been delivered to currently running top-most instance.
```

### Launch sysdump menu

```bash
adb shell am start \
    com.sec.android.app.servicemodeapp/.SysDump
```

### Launch cp debug menu 

```bash
adb shell am start \
    com.sec.android.app.servicemodeapp/.CPDebugLevel
```

### Launch rtn view menu

```bash
adb shell am start \
    com.sec.android.app.servicemodeapp/.RTN_View
```

### Launch RAMDUMP settings

```bash
adb shell am start \
    com.sec.android.app.servicemodeapp/.CPDebugLevel
```

### Launch reset call time

```bash
adb shell am start \
    com.sec.android.app.servicemodeapp/.ResetTotalCallTime
```

### Launch total call menu

```bash
adb shell am start \
    com.sec.android.app.servicemodeapp/.TotalCallTime
```

### Launch wifi menu

```bash
adb shell am start \
    com.sec.android.app.servicemodeapp/.WifiInfoActivity
```

### Launch NAND Flash

```bash
adb shell am start \
    com.sec.android.app.servicemodeapp/.NandFlashHeaderRead
```

### Launch modemui activities

```bash
adb shell am start \
    com.sec.android.app.servicemodeapp/com.sec.android.app.modemui.activities.PhoneUtil
```


### Launch ESC settings

```bash
adb shell am start \
    com.sec.android.app.servicemodeapp/com.sec.android.app.modemui.activities.PhoneUtil_ESC
```

### Launch uart USBC TC settings


```bash
adb shell am start \
    com.sec.android.app.servicemodeapp/com.sec.android.app.modemui.activities.SetPortUartUSBCTCModel
```

### Launch SGLTE settings

```bash
adb shell am start \
    com.sec.android.app.servicemodeapp/com.sec.android.app.modemui.activities.PhoneUtil_SGLTE
```

### Launch TD settings

```bash
adb shell am start \
    com.sec.android.app.servicemodeapp/com.sec.android.app.modemui.activities.PhoneUtil_TD
```

### Launch MarvellVIA settings

```bash
adb shell am start \
    com.sec.android.app.servicemodeapp/com.sec.android.app.modemui.activities.PhoneUtil_MarvellVIA
```

### Launch BCOM settings

```bash
adb shell am start \
    com.sec.android.app.servicemodeapp/com.sec.android.app.modemui.activities.PhoneUtil_Bcom
```

### Launch and show imei activity

```bash
adb shell am start \
    com.sec.android.app.servicemodeapp/com.sec.android.app.modemui.activities.ShowIMEI
```

### Launch UART USB MSM8960 Port settings

```bash
adb shell am start \
    com.sec.android.app.servicemodeapp/com.sec.android.app.modemui.activities.SetPortUartUsbMSM8960
```

### Launch MDM 9x15 settings

```bash
adb shell am start \
    com.sec.android.app.servicemodeapp/com.sec.android.app.modemui.activities.PhoneUtil_MDM9x15
```

### Launch USB Settings

```bash
adb shell am start \
    com.sec.android.app.servicemodeapp/com.sec.android.app.modemui.activities.USBSettings
```

### Launch auto answer settings

```bash
adb shell am start \
    com.sec.android.app.servicemodeapp/com.sec.android.app.modemui.activities.AutoAnswer
```


## com.google.android.gms


### Launch find my device settings

```bash
adb shell am start \
    com.google.android.gms/.mdm.settings.FindMyDeviceSettingsActivity
```

### Launch nearby sharing settings 

```bash
adb shell am start \
    com.google.android.gms/.nearby.sharing.ReceiveSurfaceActivity
```

### Launch Personal Google Setup (require root)

```bash
adb shell su -c am start \
    com.google.android.gms/.accountsettings.mg.ui.main.MainActivity  
```

### Launch hidden settings for sms verification codes

```bash
adb shell su -c am start \
    com.google.android.gms/.auth.api.phone.ui.AutofillSettingsCollapsingActivity
```

# android.intent.action.SET

### Set wallpaper for current image opened

```bash
adb shell am start -a android.intent.action.SET_WALLPAPER
```

## android.intent.action.INSERT

### Launch sim id settings for apn

```bash
adb shell am start -a android.intent.action.INSERT   \
    content://telephony/carriers  \
    --ei simId 
```

## android.intent.action.VIEW


### Launch default action view

```bash
adb shell am start \
    -a android.intent.action.VIEW 
```

### Open default browser and visit url

```bash
adb shell am start  \
    -a android.intent.action.VIEW  \
    -d https://www.nr1.nu
  # Default Browser:        com.android.browser 
  # Gogle Chrome Browser:   com.android.chrome 
  # Samsung Browser:        com.sec.android.sbrowser) 
```

### Launch google maps with fixed coordinates

```bash
adb shell am start -a android.intent.action.VIEW  \
    -d "geo:46.457398,-119.407305"
```

### Launch facebook inbox URI

```bash
adb shell am start \
    -a android.intent.action.VIEW  \
    -d facebook://facebook.com/inbox
```

### Open a vcard file from sdcard

```bash
adb shell am start \
    -a android.intent.action.VIEW  \
    -d file:///sdcard/me.vcard \
    -t text/x-vcard
```


### Launch default music player and play file

```sh
adb shell am start \
    -a android.intent.action.VIEW \
    -d file:////storage/9A8A-1069/wuseman/ringtones/<mp3_track>.mp3 
    -t audio/mp3    
```

### Launch default video player and play file

```bash
 am start -a android.intent.action.VIEW \
    -d file:///sdcard/sound.ogg 
    -t audio/ogg
```

### Launch default video player and play video file

```bash
am start -a android.intent.action.VIEW \
    -d file:///sdcard/video.mkv \
    -t video/mkv
```

## com.android.settings

### Launch android settings

```bash
adb shell am start \
    -n com.android.settings/com.android.settings.Settings
```

### Launch android sub settings

```bash
adb shell am start com.android.settings/com.android.settings.SubSettings
```

# sec.android.app.camera

### Open Camera in photo mode

```bash
adb shell am start \
    -a android.media.action.IMAGE_CAPTURE
```

### Open camera app in video mode

```bash
adb shell am start -a android.media.action.VIDEO_CAMERA
```

### Open Camera app and take a picture immediately

```bash
am start com.sec.android.app.camera/.Camera
am start -a android.media.action.STILL_IMAGE_CAMERA_SECURE
```

### Open camera app in qr-mode
```bash
am start -n 'com.sec.android.app.camera/.QrScannerActivity'
```
### Open Camera in photo mode and take a picture after 1 second

```bash
adb shell am start -a android.media.action.IMAGE_CAPTURE
adb shell sleep 1 
adb shell input keyevent 66
```    

### Open Camera in Video mode and start recording immediately

```bash
adb shell am start -a android.media.action.VIDEO_CAMERA
input keyevent 66
```

### Open an application to get content

```bash
adb shell am start  \
    -a android.intent.action.GET_CONTENT \
    -t image/jpeg
```

### Start facebook application inbox by using URI

```bash 
adb shell am start  \
    -a android.intent.action.VIEW  \
    -d facebook://facebook.com/inbox
```  

### Open a vcard file from sdcard (will open contacts app)

```bash
adb shell am start  \
    -a android.intent.action.VIEW  \
    -d file:///sdcard/me.vcard  \
    -t text/x-vcard  
```

### Launch default application by file type

```bash
adb shell am start  \
    -a android.intent.action.GET_CONTENT  \
    -t image/jpeg
```

# com.android.systemui

### Set night mode enable

```bash
adb shell am start \
    --ez show_night_mode true  \
    com.android.systemui/.tuner.TunerActivity
```

## android.settings.APPLICATION_DETAILS_SETTINGS


### Open settings for any application

```bash
adb shell am start  \
    -a android.settings.APPLICATION_DETAILS_SETTINGS package:<com.package.example>
```

# com.sec.android.app.launcher

### Launch launcher activities (root required)

```bash
adb shell am start \
    com.sec.android.app.launcher/com.sec.android.app.launcher.activities.LauncherActivity
```

### Launch homescreen (root required)

```bash
adb shell am start \
    com.sec.android.app.launcher/com.android.launcher3.uioverrides.QuickstepLauncher  
```

### Launch homescreen (root required)

```bash
adb shell am start com.sec.android.app.launcher/.activities.LauncherActivity
```

# com.sec.android.app.myfiles

### Open my files (file manager)

```bash
adb shell am start  \
    com.sec.android.app.myfiles/com.sec.android.app.myfiles.external.ui.MainActivity
```

### Open simcard settings from setup wizard

```bash
su -c am start -n 'com.sec.android.app.SecSetupWizard/.UI.SimTssSetupActivity'
```

### Open the last page in setup wizard that will tell you that everything has been done

```bash
su -c am start -n 'com.sec.android.app.SecSetupWizard/.UI.OutroActivity'
```

### Open the last page in setup wizard with the spinnign bar on

```bash
su -c am start -n 'com.sec.android.app.SecSetupWizard/.kme.B2bDeviceCheckActivity'
```

## Open samsung features window from setup wizard

```bash
su -c am start -n 'com.sec.android.app.SecSetupWizard/.UI.AlternativePermissionActivity'
```

###  Open take care of your device window from setup wizard

```bash
su -c am start -n 'com.sec.android.app.SecSetupWizard/.UI.NoticeActivity'
```

### Open language window from setup wizard

```bash
su -c am start -n 'com.sec.android.app.SecSetupWizard/.UI.LanguageSelectionActivity'
```


## adb shell am broadcast


### Send simple notification

```bash
adb shell am broadcast \
    -n your.package.name/com.google.firebase.iid.FirebaseInstanceIdReceiver \
    -c your.package.name \
    -a com.google.android.c2dm.intent.RECEIVE
```

### Send notification

```bash
adb shell am broadcast \
    -n com.android.google.youtube/com.google.firebase.iid.FirebaseInstanceIdReceiver \
    -a "com.google.android.c2dm.intent.RECEIVE" }-es "title" "Title" --es "body" "Body"
```

### Broadcast a push notification locally using ADB without need network connection

```bash
adb shell am broadcast \
  -n com.your.app/com.google.firebase.iid.FirebaseInstanceIdReceiver \
  -a "com.google.android.c2dm.intent.RECEIVE" \
  --es "extra1" "65" \
  --es "guid" "1f400184-9215-479c-b19a-a9cd9a1d9dc9" \
  --es "extra3" "VALUE" \
  --es "extra4" "'Long string with spaces'"
```

### Add a value to default shared preferences

```bash
adb shell am broadcast \
    -a org.example.app.sp.PUT \
    --es key key_name \
    --es value "hello world!"'
```

### Remove a value to default shared preferences

```bash
adb shell am broadcast \
    -a org.example.app.sp.REMOVE \
    --es key key_name'
```

### Clear all default shared preferences

```bash
adb shell am broadcast \
    -a org.example.app.sp.CLEAR \
    --es key key_name'
```

### It's also possible to specify shared preferences file

```bash
adb shell am broadcast \
    -a org.example.app.sp.PUT \
    --es name Game \
    --es key level \
    --ei value 10'
```

### Data types

```bash
adb shell am broadcast \
    -a org.example.app.sp.PUT \
    --es key string \
    --es value "hello world!"'
```
```bash
adb shell am broadcast \
    -a org.example.app.sp.PUT \
    --es key boolean \
    --ez value true'
```

```bash
adb shell am broadcast \
    -a org.example.app.sp.PUT \
    --es key float \
    --ef value 3.14159'
```

```bash
adb shell am broadcast \
    -a org.example.app.sp.PUT \
    --es key int \
    --ei value 2015'
```

```bash
adb shell am broadcast \
    -a org.example.app.sp.PUT \
    --es key long \
    --el value 9223372036854775807'
```

### Restart application process after making changes

```bash
aam broadcast \
    -a org.example.app.sp.CLEAR \
    --ez restart true'
```

### Set default preferences for an app:

```bash
adb shell am broadcast \
    -a org.example.app.sp.CLEAR \
    --es key key_name
```

**This will Factory Resetet your device after next reoboot**

```bash
adb shell am broadcast \
    -a android.intent.action.MASTER_CLEAR
reboot
```

### Launch Hidden menu screen

* Select the entry and select "enable"

```bash
adb shell "su -c am broadcast -a android.provider.Telephony.SECRET_CODE \
    -d android_secret_code://HIDDENMENUENABLE"
```

### Open internal operation test meni

```bash
adb shell "su -c am broadcast \
    -a android.provider.Telephony.SECRET_CODE 
    -d android_secret_code://IOTHIDDENMENU"
```

### Opens a dialog box followed by another dialog asking for the unlock key code

```bash
adb shell "su -c am broadcast \
    -a android.provider.Telephony.SECRET_CODE \
    -d android_secret_code://UNLOCKKERNEL"
```


### Send sms by broadcast

```bash
adb shell am broadcast  \
    -a com.whereismywifeserver.intent.TEST \
    --es sms_body "test from adb"
```


# adb shell am set-inactive


### Simulate wake mode

```bash
adb shell am set-inactive <packageName> 
adb shell am set-inactive <packageName> false
```


## adb shell am broadcast(demo)

Establishes a fake Bluetooth connection to Dialer and must be called first to enable access to all call-related commands.


### Enable Demo Mode

```bash
adb shell settings put global sysui_demo_allowed 1 
```

### Enable car dialer

```bash
adb shell am broadcast \
    -a com.android.car.dialer.intent.action.adb -\
    -es "action" "connect" 
```

### Call

```bash
 am broadcast \
    -a com.android.car.dialer.intent.action.adb \
    --es "action" "addCall" \
    --es "id" "4085524874"  
```

### Receive incoming     

```bash
adb shell am broadcast  \
    -a com.android.car.dialer.intent.action.adb  \
    --es "action" "rcvCall" --es "id" "4085524874"        
```

### Merge calls

```bash
adb shell am broadcast  \
    -a com.android.car.dialer.intent.action.adb  \
    --es "action" "unholdCall"                            
```

### Hold call 

```bash
adb shell am broadcast  \
    -a com.android.car.dialer.intent.action.adb  \
    --es "action" "holdCall"                     
```
### Unhold call

```bash
adb shell am broadcast  \
    -a com.android.car.dialer.intent.action.adb  \
    --es "action" "unholdCall"                            
```

### End call

```bash
adb shell am broadcast  \
    -a com.android.car.dialer.intent.action.adb  \
    --es "action" "endCall"  \
    --es "id" "4085524874"        
```

### Clear call history

```bash
adb shell am broadcast  \
    -a com.android.car.dialer.intent.action.adb  \
    --es "action" "clearAll"                              
```

### Press home, print call status

```bash
adb shell am start  \
    -W -c android.intent.category.HOME  \
    -a android.intent.action.MAIN
```

### Display time in `hhmm`

```bash
adb shell am broadcast -a com.android.systemui.demo \
    -e command clock -e hhmm 1200
```

### Print network datatype

```bash
adb shell am broadcast -a com.android.systemui.demo \
    -e command network -e mobile show -e level 4 -e datatype false
```

### Hide notifications

```bash
adb shell am broadcast -a com.android.systemui.demo \
    -e command notifications -e visible false
```

## Power Modes

### Show full battery but not in charging state

```bash
adb shell am broadcast -a com.android.systemui.demo  \
    -e command battery -e plugged false -e level 100
```

## Exit any demo activity

### Exit Demo Mode

```bash
adb shell am broadcast -a com.android.systemui.demo 
    -e command exit
```


## adb shell am startservice

### Restart system service

```bash 
adb shell am startservice -n com.android.systemui/.SystemUIService

```

## Google Pixel Only


### Open Google Camera (Pixel 4)

```bash
adb shell am start com.google.android.GoogleCamera 
```

## Samsung Only

### Find all available modes we can launch in GUI

```bash
adb shell cmd package dump com.samsung.android.app.telephonyui \
    |grep "Activity filter" \
    |awk '{print $2}'\
    |awk '!seen[$0]++' 
```

```bash
adb shell cmd package dump com.samsung.android.app.telephonyui\
      |grep "Activity filter"\
      |awk '{print $2}'\
      |awk '!seen[$0]++'
```


### Start samsung dialer

```bash
adb shell am start com.samsung.android.dialer/.DialtactsActivity
```

### Launch samsung sms application

```bash
adb shell am start  \
    com.samsung.android.messaging/com.samsung.android.messaging.ui.view.setting.MainSettingActivity
```

### Launch samsung messenger converstation composer

```bash
adb shell am start  \
    com.samsung.android.messaging/com.android.mms.ui.ConversationComposer
```

### Launch samsung messenger in contacts view

```bash
adb shell am start  \
    com.samsung.android.messaging/com.samsung.android.messaging.ui.view.recipientspicker.PickerActivity
```

### Launch samsung messenger with recent activity

```bash
adb shell am start  \
    com.samsung.android.dialer/com.samsung.android.dialer.calllog.view.picker.CallLogPickerActivity
```

### Launch samsung gallery

```bash
adb shell am start  \
    com.sec.android.gallery3d/com.samsung.android.gallery.app.activity.GalleryActivity
```

## Huawei Only

### Launch secret projectmenu (Huawei only)

```bash
adb shell am start  \
    com.huawei.android.projectmenu/com.huawei.android.projectmenu.ProjectMenuActivity
```

## appopos

### Set Application Run In Background Behavior
```bash
cmd appops set <package_name> RUN_IN_BACKGROUND ignore
```

### Set Any Application Run In Background Behavior
```bash
cmd appops set <package_name> RUN_ANY_IN_BACKGROUND ignore
```

### Set Application To Launch in Foreground
```bash
cmd appops set <package_name> START_FOREGROUND ignore
```

### Set Application Settings for Instant Launch In Foreground
```bash
cmd appops set <package_name> INSTANT_APP_START_FOREGROUND ignore
```

### Set Application Perrmision for Cliboard
```bash
cmd appops set <packagename> READ_CLIPBOARD allow
```

## clipboard

### Paste clipboard

```bash
adb shell input keyevent PASTE
```

### Paste clipboard

```bash
adb shell input keyevent 279
```

### Paste clipboard (OLD DEVICES ONLY)

```bash
service call clipboard 1 
```

### Set Application With Read Permissions for Clipboard

```bash
adb cmd appops set com.bankid.bus READ_CLIPBOARD allow  
```

### Add Text To Clipboard

```bash
am broadcast -a clipper.set -e text "text"
```

## cmd


### Get Airplane status

```bash
adb shell cmd connectivity airplane-mode                                                  
```

### Set Airplane mode enable/disable

```bash
adb shell cmd connectivity airplane-mode enable|disable
```

### Send notify and push notice to notification bar
```bash
adb shell su -lp 2000 -c "cmd notification post -S bigtext \
    -t 'adb pwnz' 'Tag' 'it rly does'"
```

## ADB Shell cmd <small>lock_settings</small>

:::info When lock screen is set, all commands require the --old` <CREDENTIAL>` argument.
:::

Sets the package name for server based resume on reboot service provider.
    
```bash
adb shell cmd lock_settings set-resume-on-reboot-provider-package <package_name>
```

### Removes cached unified challenge for the managed profile.
```bash
adb shell cmd lock_settings remove-cache \
    --user 0 
```
### Verifies the lock credentials.
```bash
adb shell cmd lock_settings verify \
    --old 1234 --user 0 
```
### Clears the lock credentials.
```sh
adb shell cmd lock_settings clear \
    --old 1234 --user 0 
```
### Enables / disables synthetic password.
```sh
adb shell cmd lock_settings sp \
    --old 1234 \
    --user 0  <1|0>
```
### Gets whether synthetic password is enabled.
```sh
adb shell cmd lock_settings sp \
    --old 1234 \
    --user 0 
```
### Sets the lock screen as password, using the given PASSOWRD to unlock.
```sh
adb shell cmd lock_settings set-password \
    --old 1234 \
    --user 0 'newPassword`
```
### Sets the lock screen as PIN, using the given PIN to unlock.
```sh
adb shell cmd lock_settings set-pin \
    --old 1234 \
    --user 0 `newPin`
```
### Sets the lock screen as pattern, using the given PATTERN to unlock.
```sh
adb shell cmd lock_settings set-pattern \
    --old 1234 \
    --user 0  `newPattern`
```
### When true, disables lock screen.
```sh
adb shell cmd lock_settings set-disabled \
    --old 1234 \
    --user 0  true|false
```
### Checks whether lock screen is disabled.
```sh
adb shell cmd lock_settings get-disabled \
    --old 1234 \
    --user 0 
```

## ADB Shell cmd <small>stats</small>

```bash
adb shell cmd stats print-stats
```

### Send a broadcast that triggers the subscriber to fetch metrics.
```bash
adb shell cmd stats send-broadcast uid name
```

###  Flushes all data on memory to disk.
```bash
adb shell cmd stats write-to-disk 
```

### Prints the UID, app name, version mapping.
```bash
adb shell cmd stats print-uid-map 
```

### Log a binary push state changed event.
```
adb shell cmd stats log-binary-push \
    NAME VERSION STAGING ROLLBACK_ENABLED LOW_LATENCY STATE EXPERIMENT_IDS
```

### Hide all notifications icons on Status Bar

```bash
adb shell cmd statusbar send-disable-flag notification-icons 
```
### Reset all flags to default

```bash
adb shell cmd statusbar send-disable-flag none
```
### Print Status Bar Icons

```bash
adb shell cmd statusbar get-status-icons
```
### Print Preferences for Status Bar

```bash
adb shell cmd statusbar prefs list-prefs
```
### Expand Status Bar

```bash
adb shell cmd statusbar expand-notifications
```
### Collapse Status Bar

```bash
adb shell cmd statusbar collapse
```
### Expand Full Settings

```bash
adb shell cmd statusbar expand-settings
```
### Status Bar Help

```bash
adb shell cmd statusbar help
```
### Print auth user
  
```bash
adb shell cmd user list   
```
### Enable night mode (Dark Mode) 
  
```bash
adb shell cmd uimode night yes 
```
### Disable night mode
  
```bash
adb shell cmd uimode night no
```
### Enable car Mode
  
```bash
adb shell cmd uimode car yes
```
### Disable car (car Mode) 
  
```bash
adb shell cmd uimode car no
```
### Scan for nearby ssid:s, give it 7 seconds for scan and fetch some wifi data

![Screenshot](https://raw.githubusercontent.com/wuseman/adb-cheatsheet/main/previews/wifi_result.png)

```bash
#!/bin/bash

adb shell cmd \
    -w wifi start-scan;sleep 7
adb shell cmd \
    -w wifi list-scan-results  
```  
### Sets whether we are in the middle of an emergency call.
    
Equivalent to receiving the `TelephonyManager.ACTION_EMERGENCY_CALL_STATE_CHANGED` broadcast.

```bash
adb shell cmd \
    -w wifi set-emergency-call-state enabled|disabled
```
### Sets whether Emergency Callback Mode (ECBM) is enabled.

```bash
adb shell cmd \
    -w wifi set-emergency-callback-mode enabled|disabled
```
### Lists the suggested networks from the app

```bash
adb shell cmd \
    -w wifi list-suggestions-from-app com.app.example
```
### Lists all suggested networks on this device
 
```bash
adb shell cmd \
    -w wifi list-all-suggestions
```
:::note This only returns whether the app was set via the 'network-requests-set-user-approved' shell command


* Queries whether network requests from the app is approved or not.

```bash
adb shell cmd \
    -w wifi network-requests-has-user-approved com.app.example
```
:::`
### Note: Only 1 such app can be approved from the shell at a time

* Sets whether network requests from the app is approved or not.

```bash
adb shell cmd \
    -w wifi network-requests-set-user-approved com.app.example yes|no
```
###  Lists the requested networks added via shell

```bash
adb shell cmd \
    -w wifi list-requests
```
### Removes all active requests added via shell

```bash
adb shell cmd \
    -w wifi remove-all-requests
```
### Remove a network request with provided SSID of the network
    
```bash
adb shell cmd \
    -w wifi remove-request <ssid>
```
### Add a network request with provided params

```bash
adb shell cmd \
    -w wifi add-request <ssid> open|owe|wpa2|wpa3 [<passphrase>] [-b <bssid>]
```
### Initiates wifi settings reset
    
```bash
adb shell cmd \
    -w wifi settings-reset
```
### Gets softap supported features. Will print `wifi_softap_acs_supported`
    
```bash
adb shell cmd \
    -w wifi get-softap-supported-features
```

### Sets whether wifi watchdog should trigger recovery

```bash
adb shell cmd \
    -w wifi set-wifi-watchdog enabled|disabled
```
### Sets country code to `<two-letter code>` or left for normal value
    
```bash
adb shell cmd \
    -w wifi force-country-code enabled `<two-letter code>` | disabled 
```
### Manually triggers a link probe.
    
```bash
adb shell cmd \
    -w wifi send-link-probe
```
### Clears the user disabled networks list.
    
```bash
adb shell cmd \
    -w wifi clear-user-disabled-networks
```
### Removes all user approved network requests for the app.

```bash
adb shell cmd \
    -w wifi network-requests-remove-user-approved-access-points \
    com.app.example
```
### Clear the user choice on Imsi protection exemption for carrier

```bash
adb shell cmd \
    -w wifi imsi-protection-exemption-clear-user-approved-for-carrier \
    <carrier id>
```
### Queries whether Imsi protection exemption for carrier is approved or not

```bash
adb shell cmd \
    -w wifi imsi-protection-exemption-has-user-approved-for-carrier \
    <carrier id>
```
### Sets whether Imsi protection exemption for carrier is approved or not

```bash
adb shell cmd \
    -w wifi imsi-protection-exemption-set-user-approved-for-carrier \
    <carrier id> yes|no
```
### Queries whether network suggestions from the app is approved or not.

```bash
adb shell cmd \
    -w wifi network-suggestions-has-user-approved com.app.example
```
### Sets whether network suggestions from the app is approved or not.

```bash
adb shell cmd \
    -w wifi network-suggestions-set-user-approved \
    com.app.example yes|no
```
### Sets whether low latency mode is forced or left for normal operation.

```bash
adb shell cmd \
    -w wifi force-low-latency-mode enabled|disabled
```
### Sets whether hi-perf mode is forced or left for normal operation.

```bash
adb shell cmd \
    -w wifi force-hi-perf-mode enabled|disabled
```
### Gets current interval between RSSI polls, in milliseconds.

```bash
adb shell cmd \
    -w wifi get-poll-rssi-interval-msecs
```
### Sets the interval between RSSI polls to `<int>` milliseconds.

```bash
adb shell cmd \
    -w wifi set-poll-rssi-interval-msecs `<int>`
```
### Gets setting of `CMD_IP_REACHABILITY_LOST` events triggering disconnects.

Equivalent to receiving the `TelephonyManager.ACTION_EMERGENCY_CALL_STATE_CHANGED` broadcast,
sets whether we are in the middle of an emergency call.

```bash
adb shell cmd \
    -w wifi set-emergency-call-state enabled|disabled
```
### Equivalent to receiving the TelephonyManager.ACTION_EMERGENCY_CALLBACK_MODE_CHANGED broadcast.

```bash
adb shell cmd \
    -w wifi set-emergency-callback-mode enabled|disabled
```
### Lists the suggested networks from the app

```bash
adb shell cmd \
    -w wifi list-suggestions-from-app com.app.example
```
### Lists all suggested networks on this device

```bash
adb shell cmd \
    -w wifi list-all-suggestions
```

:::note This only returns whether the app was set via the 'network-requests-set-user-approved' shell commans

Queries whether network requests from the app is approved or not

```bash
adb shell cmd \
    -w wifi network-requests-has-user-approved com.app.example
```
:::

:::note "Only 1 such app can be approved from the shell at a time"

Sets whether network requests from the app is approved or not.

```bash
adb shell cmd \
    -w wifi network-requests-set-user-approved com.app.example yes|no
```
:::  

### Lists the requested networks added via shell

```bash
adb shell cmd \
    -w wifi list-requests
```
### Removes all active requests added via shell

```bash
adb shell cmd \
    -w wifi remove-all-requests
```
### Remove a network request with provided SSID of the network

```bash
adb shell cmd \
    -w wifi remove-request <ssid>
```
### Add a network request with provided params

```bash
adb shell cmd \
    -w wifi add-request <ssid> \
    open|owe|wpa2|wpa3 [<passphrase>] \
    [-b <bssid>]
```
### Initiates wifi settings reset

```bash
adb shell cmd \
    -w wifi settings-reset
```
### and/or 'wifi_softap_wpa3_sae_supported', each on a separate line.

```bash
adb shell cmd \
    -w wifi get-softap-supported-features
```
### Gets setting of wifi watchdog trigger recovery.

```bash
adb shell cmd \
    -w wifi get-wifi-watchdog
```
### Sets whether wifi watchdog should trigger recovery

```bash
adb shell cmd \
    -w wifi set-wifi-watchdog enabled|disabled
```
### Sets country code to `<two-letter code>` or left for normal value

```bash
adb shell cmd \
    -w wifi force-country-code enabled <two-letter code> | disabled 
```
### Sets whether soft AP channel is forced to `<int>` MHz

```bash
adb shell cmd \
    -w wifi force-softap-channel enabled <int> | disabled
```
### Manually triggers a link probe.
 
```bash
adb shell cmd \
    -w wifi send-link-probe
```
### Clears the user disabled networks list.
 
```bash
adb shell cmd \
    -w wifi clear-user-disabled-networks
```
### Removes all user approved network requests for the app.
 
```bash
adb shell cmd \
    -w wifi network-requests-remove-user-approved-access-points com.app.example
```
### Clear the user choice on Imsi protection exemption for carrier
 
```bash
adb shell cmd \
    -w wifi imsi-protection-exemption-clear-user-approved-for-carrier <carrier id>
```
### Queries whether Imsi protection exemption for carrier is approved or not
 
```bash
adb shell cmd \
    -w wifi imsi-protection-exemption-has-user-approved-for-carrier <carrier id>
```
### Sets whether Imsi protection exemption for carrier is approved or not
 
```bash
adb shell cmd \
    -w wifi imsi-protection-exemption-set-user-approved-for-carrier <carrier id> yes|no
```

### Print all availble apps that can be manually started from activity manager
```bash
adb shell cmd package dump com.android.com \
    |grep "Activity filter" \
    |awk '{print $2}'
```

### List uid owner of a package

```bash
adb shell cmd package list packages -U                
```

### Print all application sorted by alpha
```bash
adb shell cmd package list packages|awk -F: '{print $2}'|sort
```
### List packages a.k.a: pm list packages

```bash
adb shell cmd package list packages -l                                          
```
### List disabled packages
     
```bash
adb shell cmd package list packages -d
```
### Filter to only show enabled packages     
     
```bash
adb shell cmd package list packages -e                                       
```
### Filter to only show third party packages    

```bash
adb shell cmd package list packages -3                                                 
```
### Set the default home activity (aka launcher)

```bash
adb shell cmd package set-home-activity [--user USER_ID] TARGET-COMPONENT        
```
### Prints all features of the system

```bash
adb shell cmd package list features 
```
### Print briefs

```bash
adb shell cmd package resolve-activity --brief  com.facebook.katana        
```


## ADB Shell cmd <small>media_session</small>

### Connect to AudioService

```bash
adb shell cmd media_session volume
```

# Volume

### Set volume of media to value (0-15)

```bash
adb shell media volume --show --stream 3 --set 'N'
```

### Set fine volume in Samsung Devices (0-150)

```bash
adb shell cmd media_session volume --show --setfine 150
```

### Control stream (3=STREAM_MUSIC) and set volume index to 11

```bash
adb shell cmd media_session volume --show --stream 3 --set 11 
```

### Print current volume from all streams

```bash
adb shell cmd media_session volume --get
```

### Print current volume range from stream 3

```bash
adb shell cmd media_session volume --stream 3 --get
```

### Print current fine volume

```bash
adb shell cmd media_session volume --getfine
```

### Media vol +

```bash
adb shell cmd media_session volume --show --adj raise
```

### Media vol -

```bash
adb shell cmd media_session volume --show --adj lower
```

### Print current volume (1-15)

```bash
adb shell cmd media_session volume --get
```

## Control Sessions


### Print list of current sessions

```bash
adb shell cmd media_session list-sessions
```

### Monitor updates to the specified session.

* Use tag output from list-sessions (see example usage)

```bash
cmd media_session monitor spotify-media-session
```

* Example Usage

```bash
streamSession="$(adb shell cmd media_session list-sessions|sed '1d'|cut -d= -f2|cut -d, -f1)"
cmd media_session monitor ${streamSession}
V2Monitoring session spotify-media-session...  available commands: play, pause, next, previous

<ENTER COMMANDS FOR CONTROL MEDIA IN REALTIME>
```

## adb shell cmd appops

### Set Application Run In Background Behavior
```bash
cmd appops set <package_name> RUN_IN_BACKGROUND ignore
```

### Set Any Application Run In Background Behavior
```bash
cmd appops set <package_name> RUN_ANY_IN_BACKGROUND ignore
```

### Set Application To Launch in Foreground
```bash
cmd appops set <package_name> START_FOREGROUND ignore
```

### Set Application Settings for Instant Launch In Foreground
```bash
cmd appops set <package_name> INSTANT_APP_START_FOREGROUND ignore
```

### Set Application Perrmision for Cliboard
```bash
cmd appops set <packagename> READ_CLIPBOARD allow
```


## Dispatch media

### Press `play` key

```bash
adb shell cmd media_session dispatch play
```

### Dispatch pause

```bash
adb shell cmd media_session dispatch pause
```

### Dispatch `play-pause`

```bash
adb shell cmd media_session dispatch play-pause
```

### Dispatch `mute`

```bash
adb shell cmd media_session dispatch mute
```

### Dispatch `headsethook` 

```bash
adb shell cmd media_session dispatch headsethook
```

### Dispatch `stop`

```bash
adb shell cmd media_session dispatch stop
```

### Dispatch `next`

```bash
adb shell cmd media_session dispatch next
```

### Dispatch `previous` 

```bash
adb shell cmd media_session dispatch previous
```

### Dispatch `rewind`

```bash
adb shell cmd media_session dispatch rewind
```

### Dispatch `record` 

```bash
adb shell cmd media_session dispatch record 
```

### Dispatch `fast-forward` 

```bash
adb shell cmd media_session dispatch fast-forward
```

## content


### Find contents in sdk map and create samples for this cheatsheet
```bash
rg .|rg 'content://.*"' -o     \
    |cut -d '"' -f1     \
    |sed 's/^/adb shell content query \
    --uri /g'     \
    |sed 'i### Print\'    
```

### Find contents in sdk map and create samples for this cheatsheet
```bash
adb shell "su -c content query \
    --uri content://com.samsung.rcs.autoconfigurationprovider/root/* \
    |tr ' ' '\n'"
```

#### Print device number 
```bash
adb shell "su -c content query \
    --uri content://com.samsung.rcs.autoconfigurationprovider/root/application/1/im/fthttpcsuser"
```

### All available options for content with examples

### Delete a certain setting 
```bash
adb shell content delete \
    --uri content://settings/secure \
    --where "name='new_setting'"
```

### Insert a setting and value to foo
```bash
adb shellcontent insert \
    --uri content://settings/secure \
    --bind name:s:user_setup_complete \
    --bind value:s:1
```
### Change setting to another setting
```bash
adb shell content update \
    --uri content://settings/secure \
    --bind value:s:newer_value \
    --where "name='new_setting'
```

Select "name" and "value" columns from secure settings where 
"name" is equal to "new_setting" and sort the result by name in ascending order.

```bash
adb shell content query \
    --uri content://settings/secure \
    --projection name:value \
    --where "name='new_setting'" \
    --sort "name ASC"
```
### Read will be able to read all kind of file extensions like zip, mp3, ogg 
### and you can redirect file with > foo.ogg, example:

### Copy ringtones cache to foo.ogg
```bash
adb shell 'content read \
    --uri content://settings/system/ringtone_cache' > foo.ogg
```
### Set ringtone to foo.ogg
```bash
adb shell 'content write \
    --uri content://settings/system/ringtone_cache' < host.ogg
```

### Print current type for a content, example:
```bash
adb shell content gettype \
    --uri content://media/internal/audio/media/
```

### Below will print all nbames and mmsproxy

```bash
adb shell su -c content query \
    --uri content://telephony/carriers/sim_apn_list \
    --projection name:mmsproxy
```

### Print heapdump
```bash
adb shell content query \
    --uri content://com.android.shell.heapdump/
```
### Print calls
```bash
adb shell content query \
    --uri content://call_log/calls
```
### Print shadow calls
```bash
adb shell content query \
    --uri content://call_log_shadow/calls
```
### Print call filters
```bash
adb shell content query \
    --uri content://call_log/calls/filter
```
### Print call log
```bash
adb shell content query \
    --uri content://call_log/calls
```
### Print downloads
```bash
adb shell content query \
    --uri content://downloads/my_downloads
```
### Print all downloads
```bash
adb shell content query \
    --uri content://downloads/all_downloads
```
### Print current downloads
```bash
adb shell content query \
    --uri content://downloads/
```
### Print my all live
```bash
adb shell content query \
    --uri content://my.app/live
```
### Print sms changes
```bash
adb shell content query \
    --uri content://sms-changes
```
### Print sms 
```bash
adb shell content query \
    --uri content://sms
```
### Print sms inbox
```bash
adb shell content query \
    --uri content://sms/inbox
```
### Print sms sent
```bash
adb shell content query \
    --uri content://sms/sent
```
### Print sms draft messages
```bash
adb shell content query \
    --uri content://sms/draft
```
### Print sms outbox
```bash
adb shell content query \
    --uri content://sms/outbox
```
### Print sms convertations
```bash
adb shell content query \
    --uri content://sms/conversations
```
### Print carrier information
```bash
adb shell content query \
    --uri content://carrier_information/carrier
```
### Print mms ids
```bash
adb shell content query \
    --uri content://mms-sms/threadID
```
### Print mms
```bash
adb shell content query \
    --uri content://mms
```
### Print mms inbox 
```bash
adb shell content query \
    --uri content://mms/inbox
```
### Print sent mms
```bash
adb shell content query \
    --uri content://mms/sent
```
### Print mms drafts
```bash
adb shell content query \
    --uri content://mms/drafts
```
### Print mms outbox
```bash
adb shell content query \
    --uri content://mms/outbox
```
### Print mms via sms
```bash
adb shell content query \
    --uri content://mms-sms/
```
### Print mms via sms convertation
```bash
adb shell content query \
    --uri content://mms-sms/conversations
```
### Print mms via sms byphone
```bash
adb shell content query \
    --uri content://mms-sms/messages/byphone
```
### Print  undelivered mms via sms 
```bash
adb shell content query \
    --uri content://mms-sms/undelivered
```
### Print drafted mms via sms 
```bash
adb shell content query \
    --uri content://mms-sms/draft
```
### Print locked mms via sms 
```bash
adb shell content query \
    --uri content://mms-sms/locked
```
### Priint serach results for mms via sms 
```bash
adb shell content query \
    --uri content://mms-sms/search
```

### Print device carriers
```bash
adb shell su -c content query \
    --uri content://telephony/carriers
```
### Print device carriers apn list for simcard
```bash
adb shell su -c content query \
    --uri content://telephony/carriers/sim_apn_list \
    --projection name:mmsproxy
```
### Print  device carriers dpc 
```bash
adb shell content query \
    --uri content://telephony/carriers/dpc
```
### Print device carriers filtered
```bash
adb shell content query \
    --uri content://telephony/carriers/filtered
```
### Print device carriers enforce manage
```bash
adb shell content query \
    --uri content://telephony/carriers/enforce_managed
```
### Print device preferapnset subids
```bash
adb shell content query \
    --uri content://telephony/carriers/preferapn/subId
```
### Print  device preferapnset subid
```bash
adb shell content query \
    --uri content://telephony/carriers/preferapnset/subId
```
### Print cellbroadcastas
```bash
adb shell content query \
    --uri content://cellbroadcasts
```
### Print cellbroadcasts history
```bash
adb shell content query \
    --uri content://cellbroadcasts/history
```
### Print cellbroadcasts öegacy
```bash
adb shell content query \
    --uri content://cellbroadcast-legacy
```
### Print cellbroadcasts service state
```bash
adb shell content query \
    --uri content://service-state/
```
### Print cellbroadcasts carrier-id
```bash
adb shell content query \
    --uri content://carrier_id
```
### Print cellbroadcasts all info about carrier-id
```bash
adb shell content query \
    --uri content://carrier_id/all
```
### Print cellbroadcasts simcard info
```bash
adb shell content query \
    --uri content://telephony/siminfo
```

### Print all contact settings available
```bash
adb shell content query \
    --uri content://contacts/settings
```

### Contact list
```bash
adb shell content query \
    --uri content://contacts/people
```
### Print contacts by filter
```bash
adb shell content query \
    --uri content://contacts/people/filter
```
### Print deleted contacts
```bash
adb shell content query \
    --uri content://contacts/deleted_people
```
### Print contacts that has an email of im id added
```bash
adb shell content query \
    --uri content://contacts/people/with_email_or_im_filter
```
### Print contact group
```bash
adb shell content query \
    --uri content://contacts/groups
```
### Print deleted contact groups
```bash
adb shell content query \
    --uri content://contacts/deleted_groups
```
### Print all phone numbers
```bash
adb shell content query \
    --uri content://contacts/phones
```
### Print all phone number filters
```bash
adb shell content query \
    --uri content://contacts/phones/filter
```
### Print all groupmemberships
```bash
adb shell content query \
    --uri content://contacts/groupmembership
```
### Print all contacts groupmemberships in raw format
```bash
adb shell content query \
    --uri content://contacts/groupmembershipraw
```
### Print contact methods
```bash
adb shell content query \
    --uri content://contacts/contact_methods
```
### Print contacts email address
```bash
adb shell content query \
    --uri content://contacts/contact_methods/email
```
### Print contacxts presence
```bash
adb shell content query \
    --uri content://contacts/presence
```
### Print contacts organizations
```bash
adb shell content query \
    --uri content://contacts/organizations
```
### Print contacts photo path
```bash
adb shell content query \
    --uri content://contacts/photos
```
### Print fcontacts extensions
```bash
adb shell content query \
    --uri content://contacts/extensions
```

### Get google contacts with full info
```bash
adb shell content query \
    --uri content://com.android.contacts/data \
    --projection display_name:data1:data4:contact_id
```
### Get google contacts and print notes for every contact
```bash
adb shell content query \
    --uri content://contacts/phones/  \
    --projection display_name:number:notes
```

```bash
adb shell content query \
    --uri content://contacts/people/
```
### Count people in contact list

```bash
adb shell bash content query \
    --uri content://contacts/people/ \
    |wc -l
```
### List the phone numbers
```bash
adb shell content query \
    --uri content://contacts/phones/
```

### List the groups
```bash
adb shell content query \
    --uri content://contacts/groups/
```
### List group membership
```bash
adb shell content query \
    --uri content://contacts/groupmembership/
```
### List organizations
```bash
adb shell content query \
    --uri content://contacts/organizations/
```
### Trick device that setup already has been done (FRP Bypassing)

```bash
adb shellcontent insert \
    --uri content://settings/secure \
    --bind name:s:user_setup_complete \
    --bind value:s:1
```
                                                                                   
```bash
adb shell am start \
    -n com.google.android.gsf.login/
```
```bash
adb shell am start \
    -n com.google.android.gsf.login.LoginActivity
```

### Global/Settings/Secure

```bash
adb shell content query \
    --uri content://settings/global

adb shell content query \
    --uri content://settings/settings

adb shell content query \
    --uri content://settings/seure
```
### Print files for all applications
```bash
adb shell content query  \
    --uri content://media/external/file  \
    --projection _data
```
### Query secure settings 

Select "name" and `value` columns from secure settings where 
`name` is equal to `new_setting` and sort the result by name in ascending order

```bash
adb shell content query  \
    --uri content://settings/secure  \
    --projection name:value
```
### Remove "new_setting" secure setting.
```bash
adb shell content delete  \
    --uri content://settings/secure \
    --where "name='new_setting'"
```
### Download current ringtone and play on PC via ffplay: 

```bash
content read  \
    --uri content://settings/system/ringtone_cache' > a.ogg  \
    |xargs ffplay a.ogg
```

### Auto rotation on
```bash
adb shell content insert \
    --uri content://settings/system \
    --bind name:s:accelerometer_rotation \
    --bind value:i:1
```

### Auto rotation off
```bash
adb shell content insert \
    --uri content://settings/system \
    --bind name:s:accelerometer_rotation \
    --bind value:i:0
```
### Rotate to landscape

```bash
adb shell content insert \
    --uri content://settings/system \  
    --bind name:s:user_rotation \
    --bind value:i:1
```

### Rotate portrait
```bash
adb shell content insert \
    --uri content://settings/system \
    --bind name:s:user_rotation \
    --bind value:i:0
```

## date

### Set date

```bash
adb shell date MMDDYYYY.XX;am broadcast \
    -a android.intent.action.TIME_SET
```

## dumpsys


### Get a nice output from dumpsys
```bash
adb shell dumpsys -l \
    |sed 's/^ /adb shell dumpsys/g;G'
```
### Get a help cheatsheet fast
```bash
adb shell dumpsys -l\
    |sed 's/^ /adb shell dumpsys/g;s/$/ -h/g;G'
```
### Execute all dumpsys help 
```bash
adb shell dumpsys appops  -h \
    |sed 's/--/adb shell --/g;s/    /### /g' \
```
### Print this help text
```bash
adb shell dumpsys appops --op [OP]
```
### Limit output to data associated with the given app op code
```bash
adb shell dumpsys appops--mode [MODE]
```
### Limit output to data associated with the given app op mode
```bash
adb shell dumpsys appops--package [PACKAGE]
```
### Limit output to data associated with the given package name
```bash
adb shell dumpsys appops--attributionTag [attributionTag]
```
### Limit output to data associated with the given attribution tag
```bash
adb shell dumpsys appops--include-discrete [n]
```
### Include discrete ops limited to n per dimension. Use zero for no limit
```bash
adb shell dumpsys appops--watchers
```
### Only output the watcher sections
```bash
adb shell dumpsys appops--history
```
### Dumpsys powerstats info
```bash
adb shell dumpsys powerstats
```
### Dumpsys power info
```bash
adb  shell dumpsys power
```
### Dumpsys Permission Permissions
```bash
adb shell dumpsys permission
adb shell dumpsys permission_checker
adb shell dumpsys permissionmgr
```
### Dumpsys password policyś
```bash
adb shell dumpsys password_policy
```

### Dumpsys Device FeatureS/Perfomance/Tracker/Info etc
```bash
adb shell dumpsys phone
```
### Grep temperatures
```bash
adb shell dumpsys thermalservice
```
### Dumpsys usagestats for an app
```bash
adb  shell dumpsys usagestats com.bankid.bus
```
### Dump current USB state or issue command:

### Example USB type C port role switch:
```bash
dumpsys usb set-port-roles "default" source device
```

### Example USB type C port simulation with full capabilities:
```bash
dumpsys usb add-port "matrix" dual
dumpsys usb connect-port "matrix" ufp? sink? device?
dumpsys usb ports
dumpsys usb disconnect-port "matrix"
dumpsys usb remove-port "matrix"
dumpsys usb reset
```
### Example USB type C port where only power role can be changed:
```bash
dumpsys usb add-port "matrix" dual
dumpsys usb connect-port "matrDumpsysix" dfp source? host
dumpsys usb reset
```
### Example USB OTG port where id pin determines function:
```bash
dumpsys usb add-port "matrix" dual
dumpsys usb connect-port "matrix" dfp source host
dumpsys usb reset
```
### Example USB device-only port:
```bash
dumpsys usb add-port "matrix" ufp
dumpsys usb connect-port "matrix" ufp sink device
dumpsys usb reset
```

### Example simulate contaminant status:
```bash
dumpsys usb add-port "matrix" ufp
dumpsys usb set-contaminant-status "matrix" true
dumpsys usb set-contaminant-status "matrix" false
```
### Example USB device descriptors:
```bash
dumpsys usb dump-descriptors -dump-short
dumpsys usb dump-descriptors -dump-tree
dumpsys usb dump-descriptors -dump-list
dumpsys usb dump-descriptors -dump-ra
```
### Dumpsys procstats
```bash
adb shell dumpsys procstats
```
### Dumpsys procstats with full stats
```bash
adb shell dumpsys procstats --full-stats
```
### Dumpsys procstats csv-mem normal
```bash
adb shell dumpsys procstats --csv-mem norm
```
### Dumpsys Package
```bash
adb shell dumpsys package com.android.chrome
```
### Print available activitys per package
```bash
adb shell dumpsys package \
    |grep -Eo "^[[:space:]]+[0-9a-f]+[[:space:]]+com.samsung.android.app.telephonyui.esimclient/[^[:space:]]+" \
    |grep -oE "[^[:space:]]+$"
com.samsung.android.app.telephonyui.esimclient/.OdaWebViewActivity
```

### Print available receivers for an an default app

```bash
adb shell dumpsys package \
    |grep -Eo "^[[:space:]]+[0-9a-f]+[[:space:]]+com.samsung.android.app.telephonyui/[^[:space:]]+"
    |grep -oE "[^[:space:]]+Receiver"
```

### Print available activitys for an an default app
```bash
adb shell dumpsys package  \
    |grep -Eo "^[[:space:]]+[0-9a-f]+[[:space:]]+com.samsung.android.app.telephonyui/[^[:space:]]+" \
    |grep -oE "[^[:space:]]+.*Activity"
979e24b com.samsung.android.app.telephonyui/.callsettings.ui.callbackground.CallBackgroundExternalActivity
979e24b com.samsung.android.app.telephonyui/.callsettings.ui.callbackground.CallBackgroundExternalActivity
979e24b com.samsung.android.app.telephonyui/.callsettings.ui.callbackground.CallBackgroundExternalActivity
979e24b com.samsung.android.app.telephonyui/.callsettings.ui.callbackground.CallBackgroundExternalActivity
82531b8 com.samsung.android.app.telephonyui/.emergencydialer.view.EmergencyDialerActivity
82531b8 com.samsung.android.app.telephonyui/.emergencydialer.view.EmergencyDialerActivity
82531b8 com.samsung.android.app.telephonyui/.emergencydialer.view.EmergencyDialerActivity
5438970 com.samsung.android.app.telephonyui/.netsettings.ui.esim.QrTransferActivity
b46c261 com.samsung.android.app.telephonyui/.callsettings.ui.preference.CallSettingsActivity
4743337 com.samsung.android.app.telephonyui/.callsettings.ui.callbackground.imagepreview.ImagePreviewPortActivity
82531b8 com.samsung.android.app.telephonyui/.emergencydialer.view.EmergencyDialerActivity
ee0c0be com.samsung.android.app.telephonyui/.netsettings.ui.NetSettingsActivity
6af1334 com.samsung.android.app.telephonyui/.carrierui.networkui.app.NoticeDataConnectionDialogActivity
b4d94cc com.samsung.android.app.telephonyui/.carrierui.iccnetwork.view.IccNetworkLockDialogActivity
6b62446 com.samsung.android.app.telephonyui/.carrierui.networkui.app.TmoDataRoamDialogActivity
3b405d1 com.samsung.android.app.telephonyui/.callsettings.ui.callbackground.imagepreview.ImagePreviewActivity
14c5c99 com.samsung.android.app.telephonyui/.callsettings.ui.roamingautodial.RoamingAutoDialMainActiv
```

### Print available services for an an default app
```bash
adb shell dumpsys package \
    |grep -Eo "^[[:space:]]+[0-9a-f]+[[:space:]]+com.samsung.android.app.telephonyui/[^[:space:]]+" \
    |grep -oE "[^[:space:]]+.*Service"
```

### Print available activitys on device

```bash
dumpsys package \
    |grep -Eo "^[[:space:]]+[0-9a-f]+[[:space:]]+.*/[^[:space:]]+" 
    |grep -oE "[^[:space:]]+$"
```

### Print current application in use (Android 12/13)   

```bash
dumpsys activity|grep -i mCurrentFocus|awk 'NR==1{print $3}'|cut -d'}' -f1
```
### Dumpsys Activity Help
```bash
adb shell dumpsys perm
```
### Dumpsys Activity Activities
```bash
adb shell dumpsys a
```
### Dumpsys Activity Broadcasts
```bash
adb shell dumpsys activity broadcast
```
### Dumpsys Broadcast Stats
```bash
adb shell dumpsys activity broadcast-stats
```
### Dumpsys Pending Intent
```bash
adb shell dumpsys activity i
```
### Dumpsys Activity Processes
```bash
adb shell dumpsys activity p
```
### Dumpsys Activity Out Of Mem
```bash
adb shell dumpsys activity o
```
### Dumpsys Activity Services
```bash
adb shell dumpsys activity services
```
### Dumpsys Activity Asociations
```bash
adb shell dumpsys activity as
```
### Dumpsys Activity LRU Services
```bash
adb shell dumpsys activity lru
```
### Dumpsys Activity LRU Services
```bash
adb shell dumpsys activity lru
```
### Dumpsys Activity binder-proxies stats on binder objects and IPCs
```bash
adb shell dumpsys activity binder-proxies
```
### Dumpsys Activity settings currently applied config settings
```bash
adb shell dumpsys activity settings
```
### Dumpsys Activity service client-side state
```bash
adb shell dumpsys activity service
```
### Dumpsys Activity package [PACKAGE_NAME]: all state related to given package
```bash
adb shell dumpsys activity package
```
### Dumpsys Activity all: dump all activities
```bash
adb shell dumpsys activity all
```
### Dumpsys Activity top: dump the top activity
```bash
adb shell dumpsys activity top
```
### Include all available server state
```bash
adb shell dumpsys activity -a
```
### Dumpsys Activity and include client state
```bash
adb shell dumpsys activity -c
```
### Dumpsys Activity all limit output to given package
```bash
adb shell dumpsys activity -p
```
### Dumpsys Activity all output checkin format, `resetting data`
```bash
adb shell dumpsys activity --checkin
```
### Dumpsys Activity output checkin format, not resetting data
```bash
adb shell dumpsys activity --C
```
### Dumpsys All Activitys data
```bash
adb shell dumpsys activity --proto
```
### Dumpsys Activity dump just the autofill-related state of an activity
```bash
adb shell dumpsys activity --autofill
```
### Dumpsys Activity Help
```bash
adb shell dumpsys activity recents
```
### Dumpsys Activity Exit Info
```bash
adb shell dumpsys activity exit-info
```
### Dumpsys Activity LMK KILLS
```bash
adb shell dumpsys activity lmk
```
### Dumpsys Activity Help
```bash
adb shell dumpsys activity recents
```
### Dumpsys Activity Permissions
```bash
adb shell dumpsys activity top
```
### Dumpsys Activity
```bash
adb shell dumpsys activity top
```
### Dumpsys Activity Top
```bash
adb shell dumpsys activity top
```
### List all active services:
```bash
adb shell dumpsys -l 
```

### List services on older devices via command below 

```bash
adb shell dumpsys -l |sed 's/^  /      /g'
```

```
Currently running services:
  AAS
  AODManagerService
  CCM
  CocktailBarService
  CodecSolution
  CustomFrequencyManagerService
  DeviceRootKeyService
  DirEncryptService
  DisplaySolution
  DockObserver
  EngineeringModeService
  HqmManagerService
  ImsBase
  OcfKeyService
  ReactiveService
  SEAMService
  SamsungKeyProvisioningManagerService
  SatsService
  SecExternalDisplayService
```
### Dumpsys lock_settings 
```bash
adb shell dumpsys lock_settings
```
```
Current lock settings service state:

User State:
 User 0
 SP Handle: 5f0ef3437a85f55
Last changed: 2021-07-28 20:22:36 (b8212446331f2358)
  SID: 3fffcda35ee6c180
  Quality: 0
 CredentialType: Pin
 SeparateChallenge: true
 Metrics: known
  
Storage:
User 0 [/data/system_de/0/spblob]:
5 2021-07-28 20:22:36 05f0ef3437a85f55.weaver
   31 2021-07-28 20:22:36 05f0ef3437a85f55.pwd
   72 2021-07-28 20:22:36 05f0ef3437a85f55.metrics
  186 2021-07-28 20:22:36 05f0ef3437a85f55.spblob
   58 2021-07-28 20:22:36 0000000000000000.handle
  
StrongAuth:
PrimaryAuthFlags state:
 userId=0, primaryAuthFlags=0

 NonStrongBiometricAllowed state:

  
RebootEscrow:
mRebootEscrowWanted=false
mRebootEscrowReady=false
mRebootEscrowListener=com.android.server.recoverysystem.RecoverySystemService@bc1c4d8
mPendingRebootEscrowKey is not set
```

### Print codecs for bluetooth headphones
```bash
adb shell dumpsys media.audio_flinger | grep -A3 Input 
```
### Show bluetooth macaddr, bluetooth name and such things
```bash
adb shell dumpsys bluetooth_manager
```
### Dump phone registry
```bash
adb shell dumpsys telephony.registry
```
### Dump GPS Data:
```bash
adb shell dumpsys dumpsys location
```
### Dump Settings

```bash
adb shell dumpsys settings
```

### Display Contacts On Sim Card

```bash
adb shell dumpsys simphonebook
```
### Show hardware info as thermal stuff for cpu, gpu and battery
```bash
adb shell dumpsys hardware_properties
```
### Print all applications that is using your email address
```bash
adb shell dumpsys account \
    |grep -i com.*$ -o\
    |cut -d' ' -f1\
    |cut -d} -f1|grep -v com$
```

### Show all notifications listener and so on:
```bash
adb shell dumpsys notification
```
### Print all added email addresses from all applications
```bash
adb shell dumpsys \
    |egrep -o "\b[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\.[A-Za-z]{2,6}\b"
```    
### Print version of a specifik package
```bash
adb shell dumpsys dumpsys package com.lge.signboard | grep versionName
    versionName=6.00.170603-0
```
### Check state for screen and figoure how device was unlcked last time:
```bash
adb shelldumpsys  user
```

### Simulate battery parameters Simulate battery parameters

Do you have any idea about how to discharge the AVD battery yet? 🔋 
Probably not if it is a virtual device with no real battery. 
But fortunately we can use the following command to simulate any scenario we want, 
like setting the level to 1% only

### Simulate we got 1% Battery
```bash
adb shell dumpsys battery set level 1
```
### Connect AC charger
```bash
adb shell dumpsys battery set ac 1
```
### Disconnect AC charger
```bash
adb shell dumpsys battery set ac 0
```
### Connect USB cable
```bash
adb shell dumpsys battery set usb 1
```
### Disconnect USB cable
```bash
adb shell dumpsys battery set usb 0
```
### After running each of those commands you can reset the battery options using
```bash
adb shell dumpsys battery reset
```
### And for example, you can dump data for all of the running services, dump all data for battery
```bash
adb shell dumpsys battery
```
### Dump stats for your battery
```bash
adb shell dumpsys atterystats 
```
### Erase old stats for battery
```bash
adb shell dumpsys batterystats --reset 
```
### Sort Applications By Ram Usag

```bash
adb shell dumpsys meminfo
```

### Unplug AC
```bash
adb shell dumpsys battery unplug
```
### Print how many notifications you have
```bash
adb shell dumpsys notification | grep NotificationRecord | wc -l 
```

## exec out


### Stream Device -> PC

```bash
adb exec-out screenrecord --Example Output-format=h264 - \
    | prefered tool - <stdin>
```
### Stream via Mplayer (Recommended)

Recommended since it is starts immediately, very little delay, and doesn't freak out like vlc.

```bash
adb exec-out screenrecord \
    --output-format=h264 - \
        |ffplay \
        -framerate 60 \
        -probesize 32 \
        -sync video  -
```

ffplay works, but it seems to take a few seconds to decide to start, and ends up lagging well behind the entire time.

### Stream via FFPLay 

FFPlay Default - No Settings

```bash
adb shell screenrecord --Example Output-format=h264 - | ffplay -
```

### FFplay Customized

```sh
adb exec-out screenrecord \
    --Example Output-format=h264 - \
        |ffplay \
        -framerate 60 \
        -probesize 32 \
        -sync video  -
```

```sh
adb shell screenrecord \
    --bit-rate=16m \
    --Example Output-format=h264 \
    --size 800x600 - \
        |ffplay \
        -framerate 60 \
        -framedrop \
        -bufsize 16M -
```

### FFplay Customized - Stream in 1080p quality

```sh
adb exec-out screenrecord \
    --bit-rate=16m \
    --Example Output-format=h264 \
    --size 1920x1080 -
```

## getprop


It is not so much to describe here, get info via getprop command. 

* Example Usage

```bash
adb shell getprop |egrep "model \
    |version.sdk \
    |manufacturer \
    |hardware \
    |platform \
    |revision \
    |serialno \
    |product.name \
    |brand" 2> /dev/null
```

#### Print CPU abi
```bash
adb shell getprop ro.product.cpu.abi
```

#### Get info if OEM Unlock is Allowed

```
1 = Enabled
0 = Disabled
```

```sh
adb shell getprop sys.oem_unlock_allowed 
```

#### Is System boot completed
```bash
adb shell adb shell getprop sys.boot_completed
```

## input 


### Erase all text

```bash
adb shell input keyevent KEYCODE_MOVE_END
adb shell input keyevent \
    --longpress $(printf 'KEYCODE_DEL %.0s' {1..250})
```

### Start Calculator via Keyevent
```bash
adb shell input keyevent KEYCODE_CALCULATOR
```
### Start Calendar via Keyevent
```bash
adb shell input keyevent KEYCODE_CALENDAR
```
### Start Call Application via Keyevent
```bash
adb shell input keyevent KEYCODE_CALL
```
### Start Camera via Keyevent
```bash
adb shell input keyevent KEYCODE_CAMERA
```
### Press Caps Lock via Keyevent
```bash
adb shell input keyevent KEYCODE_CAPS_LOCK
```
### Start Captions via Keyevent
```bash
adb shell input keyevent KEYCODE_CAPTIONS
```
### Open Contacts Application via Keyevent
```bash
adb shell input keyevent KEYCODE_CONTACTS
```
### Copy via Keyevent
```bash
adb shell input keyevent KEYCODE_COPY
```
### Cut via Keyevent
```bash
adb shell input keyevent KEYCODE_CUT
```
### Delete via Keyevent
```bash
adb shell input keyevent KEYCODE_DEL
```
### EndCall via Keyevent
```bash
adb shell input keyevent KEYCODE_ENDCALL
```
### Press END via Keyevent
```bash
adb shell input keyevent KEYCODE_END
```

### Jump to begin of line
```bash
adb shell input keyevent KEYCODE_DPAD_UP
```
### Jump to end of line
```bash
adb shell input keyevent KEYCODE_DPAD_DOWN
```
### Move cursor one step to left/righgt
```bash
adb shell input keyevent KEYCODE_DPAD_LEFT
```
```bash
adb shell input keyevent KEYCODE_DPAD_RIGFHT
```

### Press Home Button
```bash
adb shell input keyevent KEYCODE_HOME
```
### Press + and - button
```bash
adb shell input keyevent KEYCODE_MINUS
```
```bash
adb shell input keyevent KEYCODE_PLUS
```
### Press + in numpad
```bash
adb shell input keyevent KEYCODE_NUMPAD_ADD
```
### Press * button
```bash
adb shell input keyevent KEYCODE_NUMPAD_MULTIPLY
```
### Press serach key
```bash
adb shell input keyevent KEYCODE_SEARCH
```
### Open Settings
```bash
adb shell input keyevent KEYCODE_SETTINGS
```
### Press # button
```bash
adb shell input keyevent KEYCODE_NUMPAD_MULTIPLY
```
### Start default music app
```bash
adb shell input keyevent KEYCODE_POUND
```
### Mute Volume
``` bash
adb shell input keyevent KEYCODE_MUTE
```
### Open notification bar and close
```bash
adb shell input keyevent KEYCODE_NOTIFICATION
```
```bash
adb shell input keyevent KEYCODE_NOTIFICATION
```
### Cancel long press
```bash
adb shell input keyevent FLAG_CANCELED_LONG_PRESS
```
### Open App Switch for change application
```bash
adb shell input keyevent KEYCODE_APP_SWITCH
```
### Open Default Assistant
```bash
adb shell input keyevent KEYCODE_BRIGHTNESS_DOWN
```
```bash
adb shell input keyevent KEYCODE_BRIGHTNESS_UP
```
### Select
```bash
adb shell input keyevent KEYCODE_BUTTON_SELECT
```


###  Swipe from top and down 
```bash
adb shell input swipe 0 0 0 1000
```
###  Swipe from bottom and up
```bash
adb shell input swipe 0 1000 0 0
adb shell input swipe 100 4000 200 400
```
### Swipe slowwer up to top 
```bash
adb shell input swipe 500 1000 0 0
```
###  Pinch out slow
```bash
adb shell input swipe 100 100 20 20
```
###  Pinch out harder
```bash
adb shell input swipe 100 100 20 1000
```
### Swipe your finger  up and move window down 
```bash
adb shell input swipe 100 1000 20 100
```


### Simulate a swipe down for notification bar:
```bash
adb shell input swipe 0 0 0 300 
```
### Swipe and unlock screen:
```bash
adb shell input swipe 300 1000 300 500 
```



### Erase all text

```bash
adb shell input keyevent KEYCODE_MOVE_END
adb shell input keyevent \
    --longpress $(printf 'KEYCODE_DEL %.0s' {1..250})
```

### Start Calculator via Keyevent
```bash
adb shell input keyevent KEYCODE_CALCULATOR
```
### Start Calendar via Keyevent
```bash
adb shell input keyevent KEYCODE_CALENDAR
```
### Start Call Application via Keyevent
```bash
adb shell input keyevent KEYCODE_CALL
```
### Start Camera via Keyevent
```bash
adb shell input keyevent KEYCODE_CAMERA
```
### Press Caps Lock via Keyevent
```bash
adb shell input keyevent KEYCODE_CAPS_LOCK
```
### Start Captions via Keyevent
```bash
adb shell input keyevent KEYCODE_CAPTIONS
```
### Open Contacts Application via Keyevent
```bash
adb shell input keyevent KEYCODE_CONTACTS
```
### Copy via Keyevent
```bash
adb shell input keyevent KEYCODE_COPY
```
### Cut via Keyevent
```bash
adb shell input keyevent KEYCODE_CUT
```
### Delete via Keyevent
```bash
adb shell input keyevent KEYCODE_DEL
```
### EndCall via Keyevent
```bash
adb shell input keyevent KEYCODE_ENDCALL
```
### Press END via Keyevent
```bash
adb shell input keyevent KEYCODE_END
```

### Jump to begin of line
```bash
adb shell input keyevent KEYCODE_DPAD_UP
```
### Jump to end of line
```bash
adb shell input keyevent KEYCODE_DPAD_DOWN
```
### Move cursor one step to left/righgt
```bash
adb shell input keyevent KEYCODE_DPAD_LEFT
```
```bash
adb shell input keyevent KEYCODE_DPAD_RIGFHT
```
### Print -> `
```bash
adb shell input keyevent KEYCODE_GRAVE
```
### Press Home Button
```bash
adb shell input keyevent KEYCODE_HOME
```
### Press + and - button
```bash
adb shell input keyevent KEYCODE_MINUS
```
```bash
adb shell input keyevent KEYCODE_PLUS
```
### Press + in numpad
```bash
adb shell input keyevent KEYCODE_NUMPAD_ADD
```
### Press * button
```bash
adb shell input keyevent KEYCODE_NUMPAD_MULTIPLY
```
### Press serach key
```bash
adb shell input keyevent KEYCODE_SEARCH
```
### Open Settings
```bash
adb shell input keyevent KEYCODE_SETTINGS
```
### Press # button
```bash
adb shell input keyevent KEYCODE_NUMPAD_MULTIPLY
```
### Start default music app
```bash
adb shell input keyevent KEYCODE_POUND
```
### Mute Volume
``` bash
adb shell input keyevent KEYCODE_MUTE
```
### Open notification bar and close
```bash
adb shell input keyevent KEYCODE_NOTIFICATION
```
```bash
adb shell input keyevent KEYCODE_NOTIFICATION
```
### Cancel long press
```bash
adb shell input keyevent FLAG_CANCELED_LONG_PRESS
```
### Open App Switch for change application
```bash
adb shell input keyevent KEYCODE_APP_SWITCH
```
### Open Default Assistant
```bash
adb shell input keyevent KEYCODE_BRIGHTNESS_DOWN
```
```bash
adb shell input keyevent KEYCODE_BRIGHTNESS_UP
```
### Select
```bash
adb shell input keyevent KEYCODE_BUTTON_SELECT
```

### Add a Contact, fill info and press save on device
```bash
adb shell am start -a android.intent.action.INSERT \
    -t vnd.android.cursor.dir/contact \
    -e name 'wuseman' \
    -e phone '+467777701'  \
    -e email 'wuseman@nr1.nu' \
    -e postal 'Street 10, New York'
```
### For press save contact via shell from above command 

```bash
adb shell input keyevent 4
adb shell input keyevent 4 
```

```bash
adb shell am start -a android.intent.action.INSERT \
    -t vnd.android.cursor.dir/contact \
    -e name 'wuseman' \
    -e phone '+46728999329'  \
    -e email 'wuseman@nr1.nu' 
```


## keytool


### Genereate hash from keystore  -Typically used in Facebook
```sh
keytool -exportcert -alias your_alias -keystore debug.keystore \
    | openssl sha1 -binary \
    | openssl base64 
```

### Typically used in Google Maps
```sh
keytool -list -v -keystore ~/.android/debug.keystore -alias your_alias           
```



## logcat

| Tag | Description |
|-----| ------------|
| V | Verbose (lowest priority)  |
| D | Debug |
| I | Info (default priority) |
| W | Warning |
| E | Error |
| F | Fatal |
| S | Silent (highest priority, on which nothing is ever printed) |


### Print the most recent lines since the specified time

```bash
adb logcat -t '01-26 20:52:41.820'
```

### Print log only from a specific process ID

```bash
adb logcat --pid=<pid>
```

### Log multiple options

```bash
adb logcat -b main -b radio -b events
```

### Run all at once

```bash
adb logcat \
    -v brief \ 
    -v long \ 
    -v process \ 
    -v raw \ 
    -v tag \ 
    -v thread \
    -v threadtime \ 
    -v time \ 
    -v color       
```

### Print log from lock_settings only

```bash
adb logcat \
    |grep  "LockSettingsService\
    |LockPatternUtilsKeyStorage\
    |vold\
    |vold\
    |keystore2\
    |keymaster_tee\
    |LockSettingsService\
    |vold_prepare_subdirs"
```


## pm


[Contributed This Awesome Gist](https://gist.github.com/Pulimet/5013acf2cd5b28e55036c82c91bd56d8?permalink_comment_id=4273079#gistcomment-4273079)

### Disable AutoUpdate for any Package
```bash
adb shell pm disable-user –user 0 <package_name>
```

### Disable AutoUpdate for all applications
```bash
adb shell pm disable-user com.android.vending
```

### Print all applications in use
```bash
adb shell pm list packages|sed -e "s/package://" 

|while read x; do 
    cmd package resolve-activity --brief $x \
    |tail -n 1 \
    |grep -v "No activity found" 
done 
```
### List all packages installed on device 
```bash
adb shell pm list packages
```
### List enabled packages
```bash
adb shell pm list packages -e
```
### List disabled packages
```bash
adb shell pm list packages -d
```
### List third party packages installed by user
```bash
adb shell pm list packages -3
```
### List users
```bash
adb shell pm list users
```
### List permission groups
```bash
adb shell pm list permission-groups
```
### List features
```bash
adb shell pm list features
```
### Uninstall any installed package:
```bash
adb shell pm uninstall --user 0 com.package.name
```
### Uninstall multiple apps:
```sh
for packages in com.package1 com.package2; do 
    adb shell pm uninstall --user 0 "${packages}"
done 
```
### Clear application data:
```bash
adb shell pm clear PACKAGE_NAME
```
### List permission groups: 
```bash
adb shell pm list permission-groups 
```
### List instrumentation:
```bash
adb shell pm list instrumentation
```
### Grant permission to an app (Example Only For Grant): 
```bash
adb shell pm grant com.application android.permission.READ_LOGS
```
### Revoke permission to an app (Example Only For Revoke): 
```bash
adb shell pm revoke com.application android.permission.READ_LOGS
```
### Reset all permissions for an app:
```bash
adb shell pm reset-permissions -p your.app.package
```


## reboot

### System
```sh
adb reboot
```
### Recovery

```bash
adb reboot recovery
```
### Bootloader

```bash
adb reboot bootloader
```

### Fastboot (some brands)
```bash
adb reboot fastboot
```

## screencap

### Take a screenshot 
```bash  
adb shell screencap /storage/emulated/0/Pictures/screenshot.png
```

## screenrecord

### Record screen in 10 seconds

```bash
adb shell screenrecord --time-limit 10 /storage/emulated/0/Video/record.mp4
```

## service

## Statusbar

### Expand Status Bar
```bash
adb shell service call Statusbar 1
```
### Expand Status Bar `<full>`
```bash
adb shell service call Statusbar 2
```
### Collapse Status Bar
```bash
adb shell service call Statusbar 2
```
### IMEI Related

### Slot 1

### Print IMEI - Example 1
```bash
adb shell service call iphonesubinfo 1 \
    |cut -d "'" -f2 \
    |grep -Eo '[0-9]'\
    |xargs| sed 's/\ //g'  
```
### Print IMEI - Example 2
```bash
adb shell service call iphonesubinfo 3 i32 1 \
|grep -oE '[0-9a-f]{8} ' \
    | while read hex; do 
         echo -ne "\u${hex:4:4}\u${hex:0:4}"; 
       done; 
         echo          
```
### Print IMEI - Example 3
```bash
adb shell echo "[device.imei]: [$(service call iphonesubinfo 1 \
    | awk -F "'" '{print $2}' \
    | sed '1 d' \
    | tr -d '\n' \
    | tr -d '.' \
    | tr -d ' ')]"
```
### Print IMEI - Example 4

```bash
adb shell service call iphonesubinfo 1 \
    |awk -F"'" 'NR>1 { gsub(/\./,"",$2); imei=imei $2 } END {print imei}' 
```
### Print IMEI - Example 5 

```bash
adb shell service call iphonesubinfo 1 \
    |cut -c 52-66 \
    |tr -d '.[:space:]'"
```
### Print IMEI - Example 6
     
```bash
adb shell service call iphonesubinfo 1 \
    |awk -F "'" '{print }' \
    |sed '1 d' \
    |tr -d '.' \
    |awk '{print}' ORS=
```

### Slot 2

Some devices has 2 sim card slot, for print the second simcards imei use below:

* Print IMEI - Slot 2

```bash
adb shell service call iphonesubinfo 3 i32 2 \ 
    |grep -oE '[0-9a-f]{8} ' \
    |while read hex; do 
        echo -ne "\u${hex:4:4}\u${hex:0:4}"; 
    done; echo       
```    


## monkey

### Test any app by simulate pressing 10000 times at once

```sh
monkey -p com.example.myapp -v 10000 
```

## setprop

### Auto answer any call after 2 seconds:

```bash
adb shell setprop persist.sys.tel.autoanswer.ms 2000
```

### Turn off auto answer

```bash
adb shell setprop persist.sys.tel.autoanswer.ms 0
```

## settings

### List how many times we booted device:

```bash
adb shell settings list global \
    |grep "boot_count=" \
    |cut -d= -f2 \
    |head -n 1 \
    |xargs echo "Booted:" \
    |sed 's/$/ times/g'
```
### Hide Status bar

```bash
adb shell settings put global policy_control immersive.status=*
```
### Hide Navigation bar

```bash
adb shell settings put global policy_control immersive.navigation=*
```
### Hide both status and navigation bars

```bash
adb shell settings put global policy_control immersive.full=*
```
### Revert bars to stock configuration

```bash
adb shell settings put global policy_control null*
```
#### It is also possible to specify this behavior for a specific application. 

Examples to modify the behavior when Enterprise Browser is in the foreground: 

```bash
adb shell settings put global policy_control  \
    immersive.full=com.honeywell.enterprisebrowser
```
```bash
adb shell settings put global policy_control \
    immersive.navigation=com.honeywell.enterprisebrowser
```
```bash
adb shell settings put global policy_control \
    immersive.status=com.honeywell.enterprisebrowser
```


## sm

### Adopting USB-Drive
``` bash
adb shell sm set-force-adoptable true
```

## sqlite3 


### All previous commands is stored in

```bash
/data/user_de/0/com.android.providers.telephony/Log/FileLog0.log          
```

### Carrier info
```bash
cat /data/user_de/0/com.android.providers.telephony/files/carrierconfig-com.android
```
### Read Lock Settings: 
```bash
sqlite3 -line /data/user_de/0/com.android.providers.telephony/databases/telephony.db 'select * from locksettings;'
```
### Read SIM Card info
```bash
sqlite3 -line /data/user_de/0/com.android.providers.telephony/databases/telephony.db 'select * from android_metadata'
```
```bash
sqlite3 -line /data/user_de/0/com.android.providers.telephony/databases/telephony.db 'select *  from carrier'
```
```bash
sqlite3 -line /data/user_de/0/com.android.providers.telephony/databases/telephony.db 'select *  from original'
```
```bash
sqlite3 -line /data/user_de/0/com.android.providers.telephony/databases/telephony.db 'select * * from siminfo'
```

### Print ICCID
```bash
sqlite3 /data/vendor/radio/qcril.db 'select ICCID from qcril_manual_prov_table'
```
### Print Carrier Name, ICC ID, MCC, Card ID and everything that is stored from sim:
```bash
sqlite3 -line /data/user_de/0/com.android.providers.telephony/databases/telephony.db 'select * from siminfo'  
```

### Print data in .db files, clean:
```bash
grep -vx -f <(sqlite3 Main.db .dump) <(sqlite3 ${DB} .schema) 
```
### Use below command fr update dg.db file:
```bash          
sqlite3 /data/data/com.google.android.gms/databases/dg.db "update main set c='0' where a like '%attest%';" 
```
### Grab all file extensions of a kind and download to PC
```bash
for i in `"su -c find /data /system -name '*.key'"`; do 
   mkdir -p ".`dirname $i`";"su -c cat $i" > ".$i";
done
```
### Print uptime for your device by days + time

```bash
TZ=UTC date -d@$(cut -d\  -f1 /proc/uptime) +'%j %T' \
    |awk '{print $1-1"d",$2}'
```

## svc


## System Server

### System server process related command

```bash
adb shell svc system-server wait-for-crash
```

## Near-field communication

### Turn NFC on or off.

```bash
adb shell svc nfc [enable|disable]
```

## Power

### Stay On
```bash
adb shell svc power stayon [true|false|usb|ac|wireless]
```

### Set the keep awake while plugged in setting.

```bash
adb shell svc power reboot <add_reason_message>
```

### Perform a runtime shutdown and reboot device with specified reason.

```bash
adb shell svc power <add_reason_message>
```

### Perform a hot reboot

```bash
svc power reboot userspace
```

### Perform a runtime shutdown and power off the device.
```bash
adb shell svc power forcesuspend [t]
```

### Force the system into suspend, ignoring all wakelocks.

Use caution; this is dangerous. It puts the device to sleep immediately without giving apps or the system an opportunity to save their state.

```
t - Number of milliseconds to wait before issuing force-suspend.
    Helps with devices that can't suspend while plugged in.
    Defaults to 0.
    When using a delay, you must use the nohup shell modifier:
```

```bash
adb shell nohup svc power forcesuspend [time]
```

## USB

### Set the current usb function. If function is blank, sets to charging.
```bash
adb shell svc usb setFunctions 
```

### Sets the functions which, if the device was charging, become current on screen unlock. If function is blank, turn off this feature.
```bash
adb shell svc usb setScreenUnlockedFunctions [function]
```
### Gets the list of currently enabled functions 

Possible values of `[function]` are any of 

* `mtp`
* `ptp`
* `rndis`
* `midi`
* `ncm` (if supporting `gadget hal v1.2`)

```bash
adb shell svc usb getFunctions [function]
```
### Reset usb gadget

```bash
adb shell svc usb resetUsbGadget
``` 
### Gets current USB speed 

Possible values of USB speed are any of 

* `low speed` 
* `full speed`
* `high speed` 
* `super speed`
* `super speed (10G`
* `super speed (20G)`
* `higher (future extension)`

```bash
adb shell svc usb getUsbSpeed
```
### Get current Gadget Hal Version

Possible values of Hal version are any of

* `unkown`
* `V1_0` 
* `V1_1` 
* `V1_2`

```bash 
svc usb getGadgetHalVersion
```

### Get Usb Hal Version

Gets current USB Hal Version possible values of Hal version are any of

* `unknown`
* `V1_0`
* `V1_1` 
* `V1_2 
* `V1_3`

```bash 
svc usb getUsbHalVersion
```

### Reset the specified connected usb port
```bash
adb shell svc usb resetUsbPort [port number]
```

## sys

### Set Brightness Off

- 0 is the same as 1

```bash 
echo 1 > /sys/class/backlight/panel/brightness        
```

### Set to maximum

```bash 
echo 48600 > /sys/class/backlight/panel/brightness 
```

### Set to max normal
```bash 
echo 255 > /sys/class/backlight/panel/brightness 
```

### Try vibrator
```bash
echo 200 > /sys/class/timed_Example Output/vibrator/enable
```
### Print USB Mode (Charging only, MTP)
```bash 
cat /sys/devices/soc0/hw_platform'
```

## tcpdump


### Sniff your device network and SMS traffic via Wireshark on your PC

* Via Shell

```bash
adb shell su -c tcpdump -nn -i wlan0 -U -s0 -w - \
    'not port 5555' \
    |wireshark -k -i -
```

* Via exec-out

```sh
adb exec-out "su -c tcpdump -i any -U -w - 2>/dev/null" \
    |wireshark -k -S -i -
```

## telecom


### Get default application for system dialer
```bash
telecom get-system-dialer
telecom get-default-dialer
```
### Print how many sim card device can handle
```bash
telecom get-max-phones
```
### Set the override system dialer to the given component. To remove the override, send "default"
```bash
telecom set-system-dialer
```
### Get sim config
```bash
telecom get-sim-config
```
### Set phone accouint enable 
```bash
adb shell telecom set-phone-account-enabled <COMPONENT> <ID> <USER_SN>
```
### Set phone account disable
```bash
adb shell telecom set-phone-account-disabled <COMPONENT> <ID> <USER_SN>
```
### Register phone account
```bash
adb shell telecom register-phone-account <COMPONENT> <ID> <USER_SN> <LABEL>
```
### Register sim phone account
```bash
adb shell telecom register-sim-phone-account [-e] <COMPONENT> <ID> <USER_SN> <LABEL>: registers a PhoneAccount with CAPABILITY_SIM_SUBSCRIPTION and optionally CAPABILITY_PLACE_EMERGENCY_CALLS if "-e" is provided
```
### Set user select phone account
```bash
adb shell telecom set-user-selected-outgoing-phone-account [-e] <COMPONENT> <ID> <USER_SN>
```
### Set test call app
```bash
adb shell telecom set-test-call-redirection-app <PACKAGE>
```
### Test screening app
```bash
adb shell telecom set-test-call-screening-app <PACKAGE>
```
### Set phone acct suggestion component
```bash
adb shell telecom set-phone-acct-suggestion-component <COMPONENT>
```
### Remove call companion app
```bash
adb shell telecom add-or-remove-call-companion-app <PACKAGE> <1/0>
```
### Regiustert sime phone account
```bash
adb shell telecom register-sim-phone-account <COMPONENT> <ID> <USER_SN> <LABEL> <ADDRESS>
```
###  Unregister phone account
```bash
adb shell telecom unregister-phone-account <COMPONENT> <ID> <USER_SN>
```
###  Set call diagnostic service
```bash
adb shell telecom set-call-diagnostic-service <PACKAGE>
```
###  Wait on handlers call
```bash
adb shell telecom wait-on-handlers
```
###  Change sim slot on your device
```bash
adb shell telecom set-sim-count <COUNT>
```
###   Stop suppressing the blocked number provider after a call to emergency services.
```bash
adb shell telecom stop-block-suppression
```
### Clear any disconnected calls that have gotten wedged in Telecom.
```bash
adb shell telecom cleanup-stuck-calls: 
```
### Set emer phone account fitler
```bash
adb shell telecom set-emer-phone-account-filter <PACKAGE>
```
### Enables the given phone account, if it has already been registered with Telecom.
```bash
telecom set-phone-account-enabled: 
```
### Disables the given phone account, if it has already been registered with telecom.
```bash
telecom set-phone-account-disabled: 
```
### Overrides call diagnostic service
```bash
telecom set-call-diagnostic-service: 
```
### Sets the override default dialer to the given component; 
### this will override whatever the dialer role is set to.
```bash
telecom set-default-dialer: 
```
### Displays the current default dialer
```bash
telecom get-default-dialer
```
###  Wait until all handlers finish their work
```bash
telecom wait-on-handlers:
```
### Set num SIMs (2 for DSDS, 1 for single SIM. This may restart the device
```bash
telecom set-sim-count: 
```
### Get the mSIM config string. "DSDS" for DSDS mode, or "" for single SIM
```bash
telecom get-sim-config: 
```
### Get the max supported phones from the modem
```bash
telecom get-max-phones: 
```
### Sets a package name that will be used for test emergency calls. To clear, send an emp
```bash
telecom set-test-emergency-phone-account-package-filter <PACKAGE>: 
```

## uiautomator

### Print e-sim IMEI 

```bash
#!/bin/bash
# Author: wuseman

### Launch IMEI (same result if you type in caller app: *#06#) 
#### and dump screen to /tmp/read_screen.txt via uiautomator and parse esim IMEI:

adb shell input keyevent KEYCODE_CALL;
sleep 1;
input text '*#06#'; 
uiautomator dump --compressed /dev/stdout\
    |tr ' ' '\n'\
    |awk -F'"' '{print $2}'|grep "^[0-9]\{15\}$" \
    |nl -w 1 -s':'\
    |sed 's/^/IMEI/g'    
```

Output:

```
IMEI1:351800000000008
IMEI2:351820000000006
```

## uimode

### Set or read night mode
```bash
adb shell cmd uimode  night [yes|no|auto|custom]
```
### Set or read car mode
```bash
adb shell cmd uimode car [yes|no]
```
### Set custom start/end schedule time
```bash
adb shell cmd uimode time [start|end] <ISO time>
``` 

## vr

### Set Persistent VR mode enabled/disabled

```bash
adb shell set-persistent-vr-mode-enabled `true|false`
```

### Set Display Properties for VR

```bash
adb shell set-display-props `width` `height` `dpi`
```

### Enable or Disable Virtual display for vr 

```bash
adb shell enable-virtual-display `true|false`
```

## wm


### Print Screen Resolution
```bash
adb shell wm size
```
### Set Screen Size
```bash
adb shell  wm size WxH 
```
### Set Overscan
```bash
adb shell wm overscan 0,0,0,200
```



It's also possible to restart more init services from comamndline, or change init code to kill and start all userspace pro

### The source for how reboot works on android is from `Irfan Latif` on Stack Exchange (Android) post

* <https://android.stackexchange.com/a/219876/280695>

### Cool Resources out there for working in android shell

* [Android™ Developer - Emulator Console](https://developer.android.com/studio/run/emulator-console)
* [Android™ Developer - Write your app](https://developer.android.com/studio/write)
* [Android™ Google Source - Source Code](https://android.googlesource.com/)
* [Android™ Google Source - CMD Command](https://android.googlesource.com/platform/frameworks/native/+/master/cmds/cmd/)
* [Android™ Generic Project](https://android-generic.github.io/#documentation)
* [Android™ GDB](https://source.android.com/devices/tech/debug/gdb)
* [Android™ Source - Understand Logging](https://source.android.com/devices/tech/debug/understanding-logging)
* [Android™ Source - Network Connectivity Tests](https://source.android.com/devices/tech/connect/connect_tests)
* [Android™ Platform Tools](https://android.googlesource.com/platform/prebuilts/cmdline-tools/+/34a182b3646de1051ea2c9b23132d073bcaa5087/tools/bin/) 
* [Github Randorise - Mobile Hacking CheatSheet](https://github.com/randorisec/MobileHackingCheatSheet)
* [Mazhuang - Awesome ADB - Another Cheatsheet Wiki](https://mazhuang.org/awesome-adb/README.en.html)
* [Jfsso - Preferences Editor](https://github.com/jfsso/PreferencesEditor)
* [Nahamsec - Resources For Beginner - Bug Bounty Hunters](https://github.com/nahamsec/Resources-for-Beginner-Bug-Bounty-Hunters/blob/master/assets/mobile.md)  
* [Raywenderlich -Forensic Artifacts](https://www.raywenderlich.com/3419415-hack-an-android-app-finding-forensic-artifacts#toc-anchor-002)
* [Noobsec - Bypass Fingerprint Lock In Just 1 Second](https://noobsec.org/project/2019-12-22-bypass-fingerprint-lock-in-just-1-second/)
* [Noobsec - Cara Reverse Engineering](https://noobsec.org/project/2018-11-04-cara-reverse-engineering-apk/)
* [Oracle- JVMS](https://docs.oracle.com/javase/specs/jvms/se9/html/jvms-4.html)
* [Tjtech - Analyze OEM Unlocking Under Android](http://tjtech.me/analyze-oem-unlocking-under-android.html)
* [U'Smile - How to change the IMEI on Android devices](https://usmile.at/blog/how-to-change-imei-on-android-devices)
* [Android™ Q Navigation - Gesture Controls](https://www.xda-developers.com/android-q-navigation-gesture-controls/#fitvid892986)
* [Good review for clipboard control](https://www.smartspate.com/how-to-copy-text-from-the-clipboard-to-android-devices/)
* [Utilizing adb for daily tasks](https://www.droidcon.com/2021/10/21/utilizing-adb-for-daily-tasks/)

Do you have a good wiki or tutorial how to use adb and want to be on the list? Contact me at: `wuseman@nr1.nu`


This wiki/readme is licensed under the GNU General Public License v3.0 - See the [LICENSE.md](https://www.nr1.nu/linux/license/) file for details

```bash
1. Anyone can copy, modify and distribute this software.
2. You have to include the license and copyright notice with each and every distribution.
3. You can use this software privately.
4. You can use this software for commercial purposes.
5. If you dare build your business solely from this code, you risk open-sourcing the whole code base.
6. If you modify it, you have to indicate changes made to the code.
7. Any modifications of this code base MUST be distributed with the same license, GPLv3.
8. This software is provided without warranty.
9. The software author or license can not be held liable for any damages inflicted by the software.
```

More information on about the [LICENSE can be found here](http://choosealicense.com/licenses/gpl-3.0/)

### Greetings

To all my loyal friends who believe in me and give me this opportunity to hack so many devices, I love you! You know who you are.. 


### Wiki Author

wuseman (<wuseman@nr1.nu>)

### Get in touch

If you have problems, questions, ideas or suggestions please contact me by posting to [wuseman@nr1.nu](mailto:wuseman@nr1.nu)

### You will find more about wuseman on the pages below.

* <https://www.nr1.nu>
* <https://github.com/wuseman/>
* <https://gist.github.com/wuseman>
* <https://stackoverflow.com/users/9887151/wuseman>
* <https://wiki.gentoo.org/wiki/User:Wuseman>
* <https://www.commandlinefu.com/commands/by/wuseman1>
* <https://forum.xda-developers.com/m/wuseman.9065022/#adav_achievements>

